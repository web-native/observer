!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";r.r(t);var n=function(e){return Array.isArray(e)||"object"==typeof e},i=function(e){return Array.isArray(e)},a=function(e){return"string"==typeof e},s=function(e){return arguments.length&&(void 0===e||void 0===e)},o=function(e){return null===e||""===e},u=function(e){return!Array.isArray(e)&&"object"==typeof e&&e},l=function(e,t=!0){return i(e)?e:!t&&u(e)?[e]:!1!==e&&0!==e&&function(e){return o(e)||s(e)||!1===e||0===e||n(e)&&!Object.keys(e).length}(e)?[]:function(e){return!a(e)&&!s(e.length)}(e)?Array.prototype.slice.call(e):u(e)?Object.values(e):[e]},f=function(e,t=null){var r={};return 2===arguments.length&&(a(e)?r[e]=t:i(e)&&i(t)&&e.forEach((e,n)=>r[e]=t[n])),r},c=function(e){return!0!==e&&!1!==e&&null!==e&&""!==e&&!isNaN(1*e)},g=function(e){return function(e){return"function"==typeof e}(e)||e&&"[object function]"==={}.toString.call(e)},h=function(e,t){var r=void 0;return n(e)&&Object.keys(e).forEach((n,i)=>{!1!==r&&(r=t(c(n)?parseFloat(n):n,e[n],i))}),r},p=class{constructor(e,t={}){this.$={},this.$.target=e,this.$.details=t,h(t,(e,t)=>{"$"!==e&&Object.defineProperty(this,e,{value:t})})}get target(){return this.$.target}get details(){return this.$.details}},d=class extends p{constructor(e,t={}){super(e,t)}},y=function(e){return u(e)&&Object.getPrototypeOf(e)===Object.prototype},b=function(e){return!0===e||!1===e};const v=function(e,t,r=!0,a=1){if(i(e)&&i(t)&&e.length!==t.length)return!r;if(u(e)&&u(t)){if(!(Object.keys(e).length&&Object.keys(t).length||y(e)&&y(t)))return e===t===r;var s=Object.keys(e),o=Object.keys(t);if(s.length!==o.length||!v(s,o))return!r}var l=function(e,t,r=!0,a=!0,s=!1,o=!1){if(i(e)&&i(t)){var l=[],f=!0;return e.forEach(e=>{if(f){var c=!1;h(t,(t,s)=>{(!c||a&&n(e))&&(c=r(e,s),(i(c)&&!c.length||u(c)&&!Object.keys(c).length)&&(c=!1),n(c)&&a&&(e=c))}),n(c)?l.push(a?c:e):b(c)?s&&!c||!s&&c?l.push(e):o&&(f=!1):l.push(c)}}),l}if(u(e)&&u(t)){l={},f=!0;return Object.keys(e).forEach(c=>{if(f){var g=r(e[c],t[c]);(i(g)&&!g.length||u(g)&&!Object.keys(g).length)&&(g=!1),n(g)?l[c]=a?g:e[c]:b(g)?s&&!g||!s&&g?l[c]=e[c]:o&&(f=!1):l[c]=g}}),l}}(e,t,(e,t)=>a>0&&(i(e)&&i(t)||u(e)&&u(t))?v(e,t,r,a-1):n(e)&&e&&n(t)&&t?v(Object.keys(e),Object.keys(t),r):g(r)?r(e,t):isNaN(e)&&isNaN(t)?r:e===t===r,!1,!1,!0);return i(l)?l.length===e.length:u(l)?Object.keys(l).length===Object.keys(e).length:l};var m=v,w=class{disconnect(){this.disconnected=!0}},O=class{constructor(){this.fireables=[],this.currentlyFiringEvents=[]}addFireable(e){if(!(e instanceof w))throw new Error("Firebase.addFireable() expects an instance of Fireable.");return this.fireables.push(e),e}removeFireable(e,t=[]){if(!(e instanceof w))throw new Error("Firebase.removeFireable() expects an instance of Fireable.");this.fireables=this.fireables.filter(t=>t!==e)}findFireables(e){return this.fireables.filter(t=>!(e.handler&&t.handler!==e.handler||e.params&&(e.params.type&&t.params.type!==e.params.type||e.params.tags&&function(e,t,r=null){return i(t)?e.filter(e=>r?t.filter(t=>r(e,t)).length:-1!==t.indexOf(e)):[]}(t.params.tags||[],e.params.tags).length!==e.params.tags.length)))}static createForTarget(e,t,r){var i;if(e&&n(e))return(i=e[j])||(i={},Object.defineProperty(e,j,{get:()=>i,set:e=>{if(e!==i)throw new Error('Attempt to overwrite the "'+j+'" special property!')},enumerable:!1})),i[t]=new r,i[t]}static getForTarget(e,t){var r;if(e&&n(e)&&(r=e[j]))return r[t]}};const j="< r e f l e c t >";var E=class extends w{constructor(e,t={}){super(),this.handler=e,this.params=t}fire(e,t,r){if(this.disconnected||this.params.type&&this.params.type!==e.type)return t(...l(arguments).slice(2));if(!(e instanceof d))throw new Error("Trap.fire() expects an instance of QueryEvent.");return this.handler(e.target,r,t,e)}};class F extends O{fire(e,t=null){if(!(e instanceof d))throw new Error("TrapBase.fire() expects evt to be an instance of QueryEvent.");if(this.currentlyFiringEvents.filter(t=>t.type===e.type&&t.query===e.query).length)return t?t():void 0;this.currentlyFiringEvents.push(e);const r=(n,...i)=>{var a=this.fireables[n];return a?a.fire(e,(...e)=>r(n+1,...e),...i):t?t(...i):i[0]};var n=r(0);return this.currentlyFiringEvents.pop(),n}static createForTarget(e){return super.createForTarget(e,"traps",F)}static getForTarget(e){return super.getForTarget(e,"traps")}}var D=function(e,...t){return t.forEach(t=>{e.indexOf(t)<0&&e.push(t)}),e},T=function(e,t){var r=[];return function(e,t){t=(t=t||Object.prototype)&&!i(t)?[t]:t;var r=[];for(e=e;e&&(!t||t.indexOf(e)<0)&&"default"!==e.name;)r.push(e),e=e?Object.getPrototypeOf(e):null;return r}(e,t).forEach(e=>{D(r,...Object.getOwnPropertyNames(e))}),r},P=function(e,t,r=!1,a=!1,s=!1){var o=0,l=e.shift();if((c(l)||!0===l||!1===l)&&(o=l,l=e.shift()),!e.length)throw new Error("_merge() requires two or more array/objects.");return e.forEach((e,f)=>{(n(e)||g(e))&&(r?T(e):Object.getOwnPropertyNames(e)).forEach(n=>{var g=l[n],h=e[n];if((i(g)&&i(h)||u(g)&&u(h))&&(!0===o||o>0))l[n]=i(g)&&i(h)?[]:{},P([c(o)?o-1:o,l[n],g,h],t,r,a);else if(t(n,l,e,f))if(i(l)&&i(e))a?l[n]=h:l.push(h);else if(s)Object.defineProperty(l,n,Object.getOwnPropertyDescriptor(e,n));else try{l[n]=e[n]}catch(e){}})}),l},k=function(e,t=[]){var r=0;return c(arguments[0])&&n(arguments[1])&&(r=arguments[0],e=arguments[1],t=arguments[2]||[]),P([r,{},e],(e,r,n)=>g(t)?t(e):!i(t)||!t.length||t.indexOf(e)>-1,!1,!1,!1)},_=function(...e){return P(e,(e,t,r)=>!0,!1,!1,!1)},x=class extends p{constructor(e,t={}){if(t.data&&(t.fields=Object.keys(t.data)),super(e,t),this.srcEvt){this.originatingTarget=this.srcEvt.originatingTarget,this.originatingType=this.srcEvt.originatingType,this.originatingFields=[],this.originatingData={},this._originatingData={};var r=this.fields[0];Object.keys(this.srcEvt.originatingData).forEach(e=>{var t=r+"."+e;this.originatingFields.push(t),this.originatingData[t]=this.srcEvt.originatingData[e],this._originatingData[t]=this.srcEvt._originatingData[e]}),this.originatingCreated=this.srcEvt.originatingCreated,this.originatingDeleted=this.srcEvt.originatingDeleted}else this.originatingTarget=this.target,this.originatingType=this.type,this.originatingFields=this.fields,this.originatingData=this.data,this._originatingData=this._data,this.originatingCreated=this.created,this.originatingDeleted=this.deleted;this.$.propagationStopped=!1,this.$.defaultPrevented=!1,this.$.promisesInstance=null,this.$.promises=[]}stopPropagation(){this.$.propagationStopped=!0}get propagationStopped(){return this.$.propagationStopped}preventDefault(){this.$.defaultPrevented=!0}get defaultPrevented(){return this.$.defaultPrevented}promise(e){if(!(e instanceof Promise))throw new Error("Event.promise() must be called with a Promise.");this.$.promises.push(e),this.$.promisesInstance=null}get promises(){return!this.$.promisesInstance&&this.$.promises.length&&(this.$.promisesInstance=Promise.all(this.$.promises)),this.$.promisesInstance}response(e){var t;!1===e||e instanceof p&&e.propagationStopped?this.stopPropagation():!1===e||e instanceof p&&e.defaultPrevented?this.preventDefault():(e instanceof Promise&&(t=e)||e instanceof p&&(t=e.promises))&&this.promise(t)}};class $ extends O{findFireables(e){return super.findFireables(e).filter(t=>o(e.fields)||s(e.fields)||m(l(t.fields),l(e.fields)))}fire(e){if(!(e instanceof x))throw new Error("ObserverBase.fire() expects evt to be an instance of MutationEvent.");return this.currentlyFiringEvents.filter(t=>t.type===e.type&&t.fields===e.fields).length?e:(this.currentlyFiringEvents.push(e),this.fireables.forEach(t=>{e.propagationStopped||t.params.type&&t.params.type!==e.type||t.fire(e)}),this.currentlyFiringEvents.pop(),e)}static createForTarget(e){return super.createForTarget(e,"observers",$)}static getForTarget(e){return super.getForTarget(e,"observers")}}var C=function(e,t,r=null,i={}){if(!e||!n(e))throw new Error("Object must be of type object!");var a;(g(t)||o(t)||s(t))&&(i=arguments.length>2?r:{},r=t,t=null),(a=$.getForTarget(e))&&a.findFireables({handler:r,fields:t,params:i}).forEach(e=>{a.removeFireable(e)})},A=function(e,t,r){C(r,null,{tags:["#e-bubbling",e]})},S=function(e){return typeof e},N=function(e,t,r={},i={}){t=l(t).slice();for(var a=e;!s(a)&&!o(a)&&t.length;){var u=t.shift();if(!(r.get?r.get(a,u):n(a)?u in a:a[u]))return void(i.exists=!1);a=r.get?r.get(a,u):a[u]}return i.exists=!0,a},q=class extends w{constructor(e,t=null,r={}){if(super(),this.handler=e,this.fields=t,this.params=r,this.fieldsArray=l(this.fields),this.isDynamicField=this.fieldsArray.filter(e=>e.indexOf("..")>-1||e.startsWith(".")||e.endsWith(".")).length,this.isDynamicField&&this.fieldsArray.length>1)throw new Error('Only one "Dynamic Field" must be observed at a time! "'+this.fieldsArray.join(", ")+'" have been bound together.')}fire(e){if(!(this.disconnected||this.params.type&&this.params.type!==e.type)){if(!(e instanceof x))throw new Error("Observer.fire() expects an instance of MutationEvent.");this.fireCallback(e,t=>{if(t){var r=[],n=[];return t.forEach(t=>{var i=e.originatingFields.reduce((r,n)=>{var i=e.originatingData[n],a=e._originatingData[n];if(!r&&t===n)return[i,a];if(!r&&(t+".").startsWith(n+".")){var s=function(e,t,r=!1){if(""==t)return e;var n=r?e.lastIndexOf(t):e.indexOf(t);return-1===n?"":e.substr(n+t.length)}(t,n+".");return[N(i,s.split("."),{get:Q}),N(a,s.split("."),{get:Q})]}return r},null);if(i)r.push(i.shift()),n.push(i.shift());else{var s=N(e.target,a(t)?t.split("."):t,{get:Q});r.push(s),n.push(s)}}),i(this.fields)?e.response(this.handler(r,n,e)):e.response(this.handler(r[0],n[0],e))}r={},n={};return e.fields.forEach(t=>{var i=t in e.data?e.data[t]:Q(e.target,t),a=t in e._data?e._data[t]:i;r[t]=i,n[t]=a}),e.response(this.handler(r,n,e))})}}fireCallback(e,t){if(this.fieldsArray.length){var r=[];this.fieldsArray.filter((t,n)=>(r[n]=[],e.originatingFields.filter(e=>{var i=e.split("."),a=this.isDynamicField?t.split(".").map((e,t)=>e||i[t]||"").join("."):t;return D(r[n],a),(a===e||!1!==this.params.observeUp&&(a+".").startsWith(e+".")||this.params.observeDown&&(e+".").startsWith(a+"."))&&(!this.isDynamicField||!a.split(".").filter(e=>!e).length)}).length)).length&&(n=r,n.reduce((e,t)=>{var r=[];return e.forEach(e=>{l(t).forEach(t=>{var n=e.slice();n.push(t),r.push(n)})}),r},[[]])).forEach(t)}else(e.fields===e.originatingFields||this.params.observeDown)&&t();var n}},M=function(e,t,r=null,i={}){if(!e||!n(e))throw new Error("Object must be of type object!");if(g(t)&&(i=arguments.length>2?r:{},r=t,t=null),!g(r))throw new Error('Callback must be a function; "'+S(r)+'" given!');var a;return(a=$.getForTarget(e))||(a=$.createForTarget(e)),a.addFireable(new q(r,t,i))},I=function(e,t,r){var n;M(r,(i,a,s)=>{if(n=$.getForTarget(e)){var o=f(t,r);return n.fire(new x(e,{type:s.type,bubbling:!0,data:o,_data:o,srcEvt:s}))}},{observeDown:!0,tags:["#e-bubbling",e]})},W=function(e,t,r=[],a=!1){var s=e.map((e,t)=>{if(!e||!n(e))throw new Error("Target must be of type object!");return{target:e,targetCopy:k(e,r),setData:{},_setData:{},delData:{},_delData:{},created:[],deleted:[]}}),o=t(...e);return s.map(e=>{var t,s,o,u=Object.keys(e.targetCopy),l=Object.keys(e.target),f=(t=u.concat(l),t.filter((e,t,r)=>r.indexOf(e)===t)).filter(t=>{if(!(r.length&&!r.includes(t)||i(e.target)&&("length"===t||"< r e f l e c t >"===t)))return l.includes(t)?(e._setData[t]=e.targetCopy[t],e.setData[t]=e.target[t],u.includes(t)||e.created.push(t)):(e._delData[t]=e.targetCopy[t],e.delData[t]=void 0,e.deleted.push(t)),e.targetCopy[t]!==e.target[t]?(e.targetCopy[t]&&n(e.targetCopy[t])&&A(e.target,0,e.targetCopy[t]),e.target[t]&&n(e.target[t])&&I(e.target,t,e.target[t]),!0):void 0});return(a||(o=$.getForTarget(e.target)))&&(s=new x(e.target,{type:"transaction",data:_(e.setData,e.delData),_data:_(e._setData,e._delData),created:e.created,deleted:e.deleted}),o&&(Object.keys(e.delData).length&&s.response(o.fire(new x(e.target,{type:"del",data:e.delData,_data:e._delData,deleted:e.deleted}))),Object.keys(e.setData).length&&s.response(o.fire(new x(e.target,{type:"set",data:e.setData,_data:e._setData,created:e.created}))))),a?s:f}),o},Q=function(e,t){if(!e||!n(e))throw new Error("Target must be of type object!");var r,a,s=function(r){return arguments.length?r:i(t)?f(t,e):e[t]};return r=(a=F.getForTarget(e))?a.fire(new d(e,{type:"get",query:t}),s):s(),i(e)&&!c(t)&&g(r)?function(...t){return W([e],()=>r.apply(e,t))}:r},B=function(e,t){return e.reduce((e,r)=>e&&t(r),!0)},K=function(e){return"number"==typeof e},R=function(e,t){if(!e||!n(e))throw new Error("Target must be of type object!");var r,i=function(r){return arguments.length?r:t in e};return(r=F.getForTarget(e))?r.fire(new d(e,{type:"has",query:t}),i):i()},U=function(e,t,r,s=null,o=!1){if(!t||!n(t))throw new Error("Target must be of type object!");var f,c,g=r,h={},p={},y=[],b=(r,i)=>{var a;h[r]=t[r],R(t,r)||y.push(r),e&&(i=(a=i||{}).value);var s,o,u=function(e){return arguments.length?e:(a?Object.defineProperty(t,r,a):t[r]=i,!0)};if(o=F.getForTarget(t)){var l=a?{type:"define",query:r,descriptor:a}:{type:"set",query:r,value:i};s=o.fire(new d(t,l),u)}else s=u();return s&&(p[r]=i,p[r]!==h[r]&&(h[r]&&n(h[r])&&A(t,0,h[r]),p[r]&&n(p[r])&&I(t,r,p[r]))),s},v=[];return i(g)||(a(g)||K(g))&&(g=l(g))?v=g.map(e=>b(e,s)):u(r)&&(v=Object.keys(r).map(e=>b(e,r[e])),arguments.length>2&&(o=s)),(o||(c=$.getForTarget(t)))&&(f=new x(t,{type:"set",data:p,_data:h,created:y}),c&&Object.keys(p).length&&c.fire(f)),o?f:B(v,e=>e)},z=function(e,t,r=null,n=!1){return U(!1,...arguments)},G=function(e,t){l(t).forEach(t=>{var r,n,i=e[t],a=Object.getOwnPropertyDescriptor(e,t)||{enumerable:!(t in e)};"value"in a&&delete a.value,"writable"in a&&delete a.writable,a.get=()=>{if(r)return i;r=!0;var n=Q(e,t);return r=!1,n},a.set=r=>{if(n)return i=r,!0;n=!0;z(e,t,r);return n=!1,!0},Object.defineProperty(e,t,a)})},H=function(e,t){if(!t||!n(t))throw new Error("Target must be of type object!");var r,i=function(r){return arguments.length?r:e?Object.getOwnPropertyNames(t):Object.keys(t)};return(r=F.getForTarget(t))?r.fire(new d(t,{type:e?"ownKeys":"keys"}),i):i()},J=function(e){return H(!1,...arguments)};var L=function(e,t,r=null,n=!1){return U(!0,...arguments)},V=function(e,t,r=!1){if(!e||!n(e))throw new Error("Target must be of type object!");t=l(t);var i,a,s={},o={},u=[],f=t.map(t=>{s[t]=e[t],R(e,t)&&u.push(t);var r,i,a=function(r){return arguments.length?r:(delete e[t],!0)};return(r=(i=F.getForTarget(e))?i.fire(new d(e,{type:"del",query:t}),a):a())&&(o[t]=void 0,s[t]&&n(s[t])&&A(e,0,s[t])),r});return(r||(a=$.getForTarget(e)))&&(i=new x(e,{type:"del",data:o,_data:s,deleted:u}),a&&Object.keys(o).length&&a.fire(i)),r?i:B(f,e=>e)};var X={build:function e(t,r=!1){if(!t||!n(t))throw new Error("Target must be of type object!");var i=J(t);i.forEach(i=>{var a=Q(t,i);n(a)&&a&&(I(t,i,a),e(a,r))}),r&&G(t,i)},observe:M,unobserve:C,trap:function(e,t,r={}){if(!e||!n(e))throw new Error("Object must be of type object!");if(!g(t))throw new Error('Callback must be a function; "'+S(t)+'" given!');var i;return(i=F.getForTarget(e))||(i=F.createForTarget(e)),i.addFireable(new E(t,r))},untrap:function(e,t,r={}){if(!e||!n(e))throw new Error("Object must be of type object!");var i;(i=$.getForTarget(e))&&i.findFireables({handler:t,params:r}).forEach(e=>{i.removeFireable(e)})},def:L,defineProperty:L,set:z,del:V,deleteProperty:V,connect:I,disconnect:A,transaction:W,get:Q,has:R,init:G,keys:J,ownKeys:function(e){return H(!0,...arguments)},MutationEvent:x,QueryEvent:d};window.WebNative||(window.WebNative={}),window.WebNative.Reflex=X}]);
//# sourceMappingURL=main.js.map