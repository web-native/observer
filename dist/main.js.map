{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///../commons/js/isTypeFunction.js","webpack:///../commons/js/isTypeObject.js","webpack:///../commons/js/isArray.js","webpack:///../commons/js/isString.js","webpack:///../commons/js/isUndefined.js","webpack:///../commons/js/isNull.js","webpack:///../commons/js/isObject.js","webpack:///../commons/arr/from.js","webpack:///../commons/js/isEmpty.js","webpack:///../commons/js/isTypeArray.js","webpack:///../commons/obj/from.js","webpack:///../commons/js/isNumeric.js","webpack:///../commons/js/isFunction.js","webpack:///../commons/obj/each.js","webpack:///./src/internal/Event.js","webpack:///./src/internal/QueryEvent.js","webpack:///../commons/js/isNumber.js","webpack:///../commons/js/isPlainObject.js","webpack:///../commons/js/isBoolean.js","webpack:///../commons/obj/even.js","webpack:///../commons/obj/compareCallback.js","webpack:///./src/internal/Fireable.js","webpack:///./src/internal/Firebase.js","webpack:///../commons/arr/intersect.js","webpack:///./src/internal/Trap.js","webpack:///./src/internal/TrapBase.js","webpack:///../commons/arr/pushUnique.js","webpack:///../commons/obj/getAllPropertyNames.js","webpack:///../commons/obj/getPrototypeChain.js","webpack:///../commons/obj/mergeCallback.js","webpack:///../commons/obj/copy.js","webpack:///../commons/obj/merge.js","webpack:///./src/internal/MutationEvent.js","webpack:///./src/internal/ObserverBase.js","webpack:///./src/unobserve.js","webpack:///./src/unlink.js","webpack:///../commons/js/getType.js","webpack:///../commons/obj/get.js","webpack:///./src/internal/Observer.js","webpack:///../commons/str/after.js","webpack:///../commons/arr/crossJoin.js","webpack:///./src/observe.js","webpack:///./src/link.js","webpack:///./src/transaction.js","webpack:///../commons/arr/unique.js","webpack:///./src/get.js","webpack:///../commons/js/isClass.js","webpack:///../commons/arr/all.js","webpack:///./src/has.js","webpack:///./src/_setProp.js","webpack:///./src/set.js","webpack:///./src/init.js","webpack:///./src/_getProps.js","webpack:///./src/keys.js","webpack:///./src/trap.js","webpack:///./src/def.js","webpack:///./src/del.js","webpack:///./src/internal/ListenerBase.js","webpack:///./src/internal/Listener.js","webpack:///./src/index.js","webpack:///./src/build.js","webpack:///./src/untrap.js","webpack:///./src/ownKeys.js","webpack:///./src/on.js","webpack:///./src/off.js","webpack:///./src/trigger.js","webpack:///./src/browser-entry.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","val","Array","isArray","arguments","length","undefined","castObject","keys","slice","values","obj","forEach","k","isNaN","toString","returnValue","callback","parseFloat","target","details","this","$","propagationStopped","defaultPrevented","promisesInstance","promises","prop","promise","Promise","Error","push","all","rspns","proms","isEvent","stopPropagation","preventDefault","Event","super","getPrototypeOf","_even","obj1","obj2","assertion","depth","obj1Keys","obj2Keys","result","contn","v1","testPass","v2","netComparison","contrast","returnOnFirstFalse","disconnected","fireables","currentlyFiringEvents","fireable","tags","filter","_fireable","query","observer","handler","params","type","arr2","arr","val1","val2","indexOf","Base","firebases","firebaseKey","set","Fireable","evt","next","recieved","Firebase","defaultHandler","e","index","_args","trap","fire","args","pop","createForTarget","getForTarget","items","itm","keysAll","until","prototypalChain","getOwnPropertyNames","mergeCallback","objs","deepProps","isReplace","withSymbols","shift","valAtObj1","valAtObj2","getOwnPropertyDescriptor","data","fields","srcEvt","dataEven","originatingTarget","originatingType","originatingFields","originatingData","_originatingData","field","path","_path","originatingCreated","originatingDeleted","_data","created","deleted","findFireables","firebase","originalCallback","removeFireable","unobserve","reciever","_ctxt","ctxt","_key","exists","fieldsArray","isDynamicField","startsWith","endsWith","join","diff","fireCallback","fieldData","reduce","originatingField","_value","fieldQuery","search","subject","pos","afterLast","lastIndexOf","substr","split","currentValue","response","prevValue","dynamicFieldOutcomes","observedField","replace","inputOriginatingField","inputOriginatingFieldSplit","observedDynamicFieldOutcome","map","seg","observeUp","observeDown","currTable","column","newTable","row","_row","addFireable","Observer","observe","entries","_entries","base","MutationEvent","bubbling","context","targets","targetCopy","setData","_setData","delData","_delData","cntxt","mutationBase","initialKeys","currentKeys","changedKeys","concat","self","includes","unlink","returnEvent","trapBase","defaultGet","QueryEvent","test","Function","transaction","apply","prevTest","defaultHas","_state","keysOrPayload","handleSet","related","descriptor","define","success","defaultSet","_success","successStates","payloadKeys","state","_setProp","onGetFire","onSetFire","currentDescriptor","writable","newValue","defaultKeys","_keys","ownKeys","_getProps","defaultDel","listener","Static","build","_init","init","Trap","untrap","def","del","deleteProperty","link","has","on","Listener","off","trigger","window","WebNative","Reflex"],"mappings":"aACE,IAAIA,EAAmB,GAGvB,SAASC,EAAoBC,GAG5B,GAAGF,EAAiBE,GACnB,OAAOF,EAAiBE,GAAUC,QAGnC,IAAIC,EAASJ,EAAiBE,GAAY,CACzCG,EAAGH,EACHI,GAAG,EACHH,QAAS,IAUV,OANAI,EAAQL,GAAUM,KAAKJ,EAAOD,QAASC,EAAQA,EAAOD,QAASF,GAG/DG,EAAOE,GAAI,EAGJF,EAAOD,QAKfF,EAAoBQ,EAAIF,EAGxBN,EAAoBS,EAAIV,EAGxBC,EAAoBU,EAAI,SAASR,EAASS,EAAMC,GAC3CZ,EAAoBa,EAAEX,EAASS,IAClCG,OAAOC,eAAeb,EAASS,EAAM,CAAEK,YAAY,EAAMC,IAAKL,KAKhEZ,EAAoBkB,EAAI,SAAShB,GACX,oBAAXiB,QAA0BA,OAAOC,aAC1CN,OAAOC,eAAeb,EAASiB,OAAOC,YAAa,CAAEC,MAAO,WAE7DP,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,KAQvDrB,EAAoBsB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQrB,EAAoBqB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,iBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKX,OAAOY,OAAO,MAGvB,GAFA1B,EAAoBkB,EAAEO,GACtBX,OAAOC,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOrB,EAAoBU,EAAEe,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRzB,EAAoB6B,EAAI,SAAS1B,GAChC,IAAIS,EAAST,GAAUA,EAAOqB,WAC7B,WAAwB,OAAOrB,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAH,EAAoBU,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRZ,EAAoBa,EAAI,SAASiB,EAAQC,GAAY,OAAOjB,OAAOkB,UAAUC,eAAe1B,KAAKuB,EAAQC,IAGzG/B,EAAoBkC,EAAI,GAIjBlC,EAAoBA,EAAoBmC,EAAI,G,sCCzEtC,kBACd,MAAsB,mBAARC,GCIA,cACd,OAAOC,MAAMC,QAAQF,IAAuB,iBAARA,GAAoB,EAAgBA,ICP1D,cACd,OAAOC,MAAMC,QAAQF,ICDP,cACd,MAAsB,iBAARA,GCDA,cACd,OAAOG,UAAUC,cAAmBC,IAARL,QAAoC,IAARA,ICD1C,cACd,OAAe,OAARA,GAAwB,KAARA,GCDT,cACd,OAAQC,MAAMC,QAAQF,IAAuB,iBAARA,GAAoBA,GCQ3C,mBACd,OAAI,EAASA,GACLA,GAEHM,GAAc,EAAUN,GACrB,CAACA,IAEG,IAARA,GAAyB,IAARA,GCPP,YACd,OAAO,EAAQA,IAAQ,EAAaA,KAAgB,IAARA,GAAyB,IAARA,GACxD,EAAcA,KAAStB,OAAO6B,KAAKP,GAAKI,ODKX,CAASJ,GACnC,GEVM,YACd,OAAQ,EAAUA,KAAS,EAAaA,EAAII,QFWxC,CAAaJ,GACTC,MAAML,UAAUY,MAAMrC,KAAK6B,GAE/B,EAAUA,GACNtB,OAAO+B,OAAOT,GAEf,CAACA,IGlBM,qBACd,IAAIU,EAAM,GAQV,OAPyB,IAArBP,UAAUC,SACT,EAAUb,GACbmB,EAAInB,GAAOS,EACD,EAAST,IAAQ,EAASS,IACpCT,EAAIoB,QAAQ,CAACC,EAAG5C,IAAM0C,EAAIE,GAAKZ,EAAIhC,KAG9B0C,GCfO,cACd,OAAe,IAARV,IAAwB,IAARA,GAAyB,OAARA,GAAwB,KAARA,IAAea,MAAY,EAANb,ICG/D,cACd,OAAO,EAAgBA,IAASA,GAAiC,sBAA1B,GAAGc,SAAS3C,KAAK6B,ICE1C,gBACd,IAAIe,OAAcV,EAQlB,OAPI,EAAcK,IACjBhC,OAAO6B,KAAKG,GAAKC,QAAQ,CAACC,EAAG5C,MACR,IAAhB+C,IACHA,EAAcC,EAAS,EAAWJ,GAAKK,WAAWL,GAAKA,EAAGF,EAAIE,GAAI5C,MAI9D+C,GCXO,QAUd,YAAYG,EAAQC,EAAU,IAC7BC,KAAKC,EAAI,GACTD,KAAKC,EAAEH,OAASA,EAChBE,KAAKC,EAAEF,QAAUA,EACjBC,KAAKC,EAAEC,oBAAqB,EAC5BF,KAAKC,EAAEE,kBAAmB,EAC1BH,KAAKC,EAAEG,iBAAmB,KAC1BJ,KAAKC,EAAEI,SAAW,GAElB,EAAMN,EAAS,CAACO,EAAMzC,KACR,MAATyC,GACHhD,OAAOC,eAAeyC,KAAMM,EAAM,CAACzC,YAUtC,aACC,OAAOmC,KAAKC,EAAEH,OAQf,cACC,OAAOE,KAAKC,EAAEF,QAcf,kBACCC,KAAKC,EAAEC,oBAAqB,EAQ7B,yBACC,OAAOF,KAAKC,EAAEC,mBASf,iBACCF,KAAKC,EAAEE,kBAAmB,EAQ3B,uBACC,OAAOH,KAAKC,EAAEE,iBAUf,QAAQI,GACP,KAAMA,aAAmBC,SACxB,MAAM,IAAIC,MAAM,kDAEjBT,KAAKC,EAAEI,SAASK,KAAKH,GACrBP,KAAKC,EAAEG,iBAAmB,KAQ3B,eAIC,OAHKJ,KAAKC,EAAEG,kBAAoBJ,KAAKC,EAAEI,SAASrB,SAC/CgB,KAAKC,EAAEG,iBAAmBI,QAAQG,IAAIX,KAAKC,EAAEI,WAEvCL,KAAKC,EAAEG,iBAWf,SAASQ,GACR,IAAIC,EACAC,EAAU,EAAUF,KAAW,EAAaA,EAAMV,sBAAwB,EAAaU,EAAMT,mBAClF,IAAVS,GAAqBE,GAAWF,EAAMV,mBAC1CF,KAAKe,mBACgB,IAAVH,GAAqBE,GAAWF,EAAMT,iBACjDH,KAAKgB,kBACMJ,aAAiBJ,UAAYK,EAAQD,IAC7CE,IAAYD,EAAQD,EAAMP,YAC7BL,KAAKO,QAAQM,KCrID,gBAAcI,EAU5B,YAAYnB,EAAQC,EAAU,IAC7BmB,MAAMpB,EAAQC,KCfD,cACd,MAAsB,iBAARnB,GCKA,cACd,OAAO,EAAUU,IAAQhC,OAAO6D,eAAe7B,KAAShC,OAAOkB,WCPjD,cACd,OAAe,IAARI,IAAwB,IAARA,GCcxB,MAAMwC,EAAQ,SAASC,EAAMC,EAAMC,GAAY,EAAMC,EAAQ,GAC5D,GAAI,EAASH,IAAS,EAASC,IAASD,EAAKrC,SAAWsC,EAAKtC,OAC5D,OAAQuC,EAET,GAAI,EAAUF,IAAS,EAAUC,GAAO,CACvC,IAAIG,EAAWnE,OAAO6B,KAAKkC,GACvBK,EAAWpE,OAAO6B,KAAKmC,GAC3B,IAAKG,EAASzC,SAAW0C,EAAS1C,OAGjC,OAAO,EAAeqC,IAAS,EAAeC,GAC3CC,EACCF,IAASC,IAAUC,EAExB,IAAKH,EAAMK,EAAUC,GACpB,OAAQH,EAGV,GAAIC,EAAQ,IAAO,EAASH,IAAS,EAASC,IAAW,EAAUD,IAAS,EAAUC,IAAS,CAC9F,IAAIK,ECnBS,kCACd,GAAI,EAASN,IAAS,EAASC,GAAO,CACrC,IAAIK,EAAS,GACTC,GAAQ,EA4BZ,OA3BAP,EAAK9B,QAAQsC,IACZ,GAAKD,EAAL,CAGA,IAAIE,GAAW,EACf,EAAMR,EAAM,CAAC9B,EAAGuC,OACVD,GAAaE,GAAiB,EAAcH,MAChDC,EAAWP,EAAUM,EAAIE,IACpB,EAASD,KAAcA,EAAS9C,QAAY,EAAU8C,KAAcxE,OAAO6B,KAAK2C,GAAU9C,UAC9F8C,GAAW,GAER,EAAcA,IAAaE,IAE9BH,EAAKC,MAIJ,EAAcA,GACjBH,EAAOjB,KAAKsB,EAAgBF,EAAWD,GAC5B,EAAWC,GAEXG,IAAaH,IAAeG,GAAYH,EACnDH,EAAOjB,KAAKmB,GACFK,IACVN,GAAQ,GAJRD,EAAOjB,KAAKoB,MAOPH,EAGR,GAAI,EAAUN,IAAS,EAAUC,GAAO,CACnCK,EAAS,GACTC,GAAQ,EAmBZ,OAlBAtE,OAAO6B,KAAKkC,GAAM9B,QAAQC,IACzB,GAAKoC,EAAL,CAGA,IAAIE,EAAWP,EAAUF,EAAK7B,GAAI8B,EAAK9B,KAClC,EAASsC,KAAcA,EAAS9C,QAAY,EAAU8C,KAAcxE,OAAO6B,KAAK2C,GAAU9C,UAC9F8C,GAAW,GAER,EAAcA,GACjBH,EAAOnC,GAAKwC,EAAgBF,EAAWT,EAAK7B,GACjC,EAAWsC,GAEXG,IAAaH,IAAeG,GAAYH,EACnDH,EAAOnC,GAAK6B,EAAK7B,GACP0C,IACVN,GAAQ,GAJRD,EAAOnC,GAAKsC,KAOPH,GDpCM,CAAiBN,EAAMC,EAAM,CAACO,EAAIE,IACvCX,EAAMS,EAAIE,EAAIR,EAAWC,EAAQ,IACtC,GAAwB,GAAmB,GAC9C,OAAO,EAASG,GACbA,EAAO3C,SAAWqC,EAAKrC,QAAU2C,EAAO3C,SAAWsC,EAAKtC,OACvD,EAAU2C,IAAW,EAAUN,GAC/B/D,OAAO6B,KAAKwC,GAAQ3C,SAAW1B,OAAO6B,KAAKkC,GAAMrC,QAAU1B,OAAO6B,KAAKwC,GAAQ3C,SAAY1B,OAAO6B,KAAKmC,GAAMtC,OAC7G2C,EAEL,OAAO,EAAYJ,GAAaA,EAAUF,EAAMC,GAC/C,EAAUD,IAAS,EAAUC,IAAS7B,MAAM4B,IAAS5B,MAAM6B,GACxDC,EACCF,IAASC,IAAUC,GAOV,QEtDA,QAOd,aACCvB,KAAKmC,cAAe,ICDP,QAOd,cACCnC,KAAKoC,UAAY,GACjBpC,KAAKqC,sBAAwB,GAW9B,YAAYC,GAEX,OADAtC,KAAKoC,UAAU1B,KAAK4B,GACbA,EAYR,eAAeA,EAAUC,EAAO,IAC/BvC,KAAKoC,UAAYpC,KAAKoC,UAAUI,OAAOC,GAAaA,IAAcH,GAWnE,cAAcI,GACb,OAAO1C,KAAKoC,UAAUI,OAAOG,KACnBD,EAAME,SAAWD,EAASC,UAAYF,EAAME,SAAcF,EAAMG,SACtEH,EAAMG,OAAOC,MAAQH,EAASE,OAAOC,OAASJ,EAAMG,OAAOC,MACxDJ,EAAMG,OAAON,MChDP,qBACd,OAAQ,EAASQ,GAAaC,EAAIR,OAAOS,GAAQrD,EAC9CmD,EAAKP,OAAOU,GAAQtD,EAASqD,EAAMC,IAAOlE,QAClB,IAAxB+D,EAAKI,QAAQF,IAFS,GD+CI,CAAWN,EAASE,OAAON,MAAQ,GAAIG,EAAMG,OAAON,MAAMvD,SAAW0D,EAAMG,OAAON,KAAKvD,UAapH,uBAAwBV,EAAQwE,EAAMM,GAEpC,IAAIC,EADL,GAAI/E,GAAU,EAAcA,GAe3B,OAbM+E,EAAY/E,EAAOgF,MACxBD,EAAY,GACZ/F,OAAOC,eAAee,EAAQgF,EAAa,CAC1C7F,IAAI,IAAM4F,EACVE,IAAI1F,IACH,GAAIA,IAAUwF,EACb,MAAM,IAAI5C,MAAM,6BAA+B6C,EAAc,wBAG/D9F,YAAW,KAGb6F,EAAUP,GAAiB,cAATA,EAAuB,IAAIM,EAAK9E,GAAU,IAAI8E,EACzDC,EAAUP,GAYnB,oBAAoBxE,EAAQwE,GAC3B,IAAIO,EACJ,GAAI/E,GAAU,EAAcA,KAAY+E,EAAY/E,EAAOgF,IAC1D,OAAOD,EAAUP,KAQpB,MAAMQ,EAAc,UEtGL,oBAAcE,EAU5B,YAAYZ,EAASC,EAAS,IAC7B3B,QACAlB,KAAK4C,QAAUA,EACf5C,KAAK6C,OAASA,EAcf,KAAKY,EAAKC,EAAMC,GACf,OAAI3D,KAAKmC,cAAiBnC,KAAK6C,OAAOC,MAAQ9C,KAAK6C,OAAOC,OAASW,EAAIX,KAC/DY,KAAQ,EAAS3E,WAAWK,MAAM,IAEnCY,KAAK4C,QAAQa,EAAKE,EAAUD,KC9BtB,MAAM,UAAiBE,EAUrC,KAAKH,EAAKI,EAAiB,MAC1B,GAAI7D,KAAKqC,sBAAsBG,OAAOsB,GAAKA,EAAEhB,OAASW,EAAIX,MAAQgB,EAAEpB,QAAUe,EAAIf,OAAO1D,OACxF,OAAO6E,EAAiBA,SAAmB5E,EAE5Ce,KAAKqC,sBAAsB3B,KAAK+C,GAChC,MAAMC,EAAO,CAACK,KAAUC,KACvB,IAAIC,EAAOjE,KAAKoC,UAAU2B,GAC1B,OAAIE,EACIA,EAAKC,KAAKT,EAAK,IAAIU,IAClBT,EAAKK,EAAQ,KAAMI,MACbH,GAERH,EAAiBA,KAAkBG,GAASA,EAAM,IAE1D,IAAInG,EAAQ6F,EAAK,GAEjB,OADA1D,KAAKqC,sBAAsB+B,MACpBvG,EAMR,uBAAuBS,GACtB,OAAO4C,MAAMmD,gBAAgB/F,EAAQ,QAAS,GAM/C,oBAAoBA,GACnB,OAAO4C,MAAMoD,aAAahG,EAAQ,UC9CrB,uBAMd,OALAiG,EAAMhF,QAAQiF,IACTxB,EAAIG,QAAQqB,GAAO,GACtBxB,EAAItC,KAAK8D,KAGJxB,GCAO,gBACd,IAAIyB,EAAU,GAId,OCNc,cAEdC,GADAA,EAAQA,GAASpH,OAAOkB,aACN,EAASkG,GAAS,CAACA,GAASA,EAE9C,IAAIC,EAAkB,GAEtB,IADIrF,EAAMA,EACHA,KAASoF,GAASA,EAAMvB,QAAQ7D,GAAO,IAAmB,YAAbA,EAAInC,MACvDwH,EAAgBjE,KAAKpB,GACrBA,EAAMA,EAAMhC,OAAO6D,eAAe7B,GAAO,KAE1C,OAAOqF,EDPP,CAAmBrF,EAAKoF,GAAOnF,QAAQD,IACtC,EAAYmF,KAAYnH,OAAOsH,oBAAoBtF,MAE7CmF,GEDO,SAASI,EAAcC,EAAMlF,EAAUmF,GAAY,EAAOC,GAAY,EAAOC,GAAc,GACzG,IAAIzD,EAAQ,EACRH,EAAOyD,EAAKI,QAKhB,IAJI,EAAW7D,KAAkB,IAATA,IAA0B,IAATA,KACxCG,EAAQH,EACRA,EAAOyD,EAAKI,UAERJ,EAAK9F,OACT,MAAM,IAAIyB,MAAM,gDAkCjB,OAhCAqE,EAAKvF,QAAQ,CAAC+B,EAAM1E,MACd,EAAc0E,IAAU,EAAYA,MAGxCyD,EAAY,EAAqBzD,GAAQhE,OAAOsH,oBAAoBtD,IAAO/B,QAAQpB,IACnF,IAAIgH,EAAY9D,EAAKlD,GACjBiH,EAAY9D,EAAKnD,GACrB,IAAM,EAASgH,IAAc,EAASC,IAAgB,EAAUD,IAAc,EAAUC,OAC1E,IAAV5D,GAAkBA,EAAQ,GAE7BH,EAAKlD,GAAO,EAASgH,IAAc,EAASC,GAAa,GAAK,GAC9DP,EAAc,CAAC,EAAWrD,GAASA,EAAQ,EAAIA,EAAOH,EAAKlD,GAAMgH,EAAWC,GAAYxF,EAAUmF,EAAWC,EAAWC,QAClH,GAAIrF,EAASzB,EAAKkD,EAAMC,EAAM1E,GACpC,GAAI,EAASyE,IAAS,EAASC,GAC1B0D,EACH3D,EAAKlD,GAAOiH,EAEZ/D,EAAKX,KAAK0E,QAIX,IACKH,EACH3H,OAAOC,eAAe8D,EAAMlD,EAAKb,OAAO+H,yBAAyB/D,EAAMnD,IAEvEkD,EAAKlD,GAAOmD,EAAKnD,GAEjB,MAAM2F,SAKLzC,EC3CO,4BACd,IAAIG,EAAQ,EAMZ,OALI,EAAWzC,UAAU,KAAO,EAAcA,UAAU,MACvDyC,EAAQzC,UAAU,GAClBO,EAAMP,UAAU,GAChByD,EAASzD,UAAU,IAAM,IAEnB,EAAe,CAACyC,EAAO,GAAIlC,GAAM,CAACnB,EAAKkD,EAAMC,IAC5C,EAAYkB,GAAUA,EAAOrE,IAChC,EAASqE,KAAWA,EAAOxD,QAASwD,EAAOW,QAAQhF,IAAQ,GAC7D,GAAoB,EAAoB8G,ICd7B,iBACd,OAAO,EAAeH,EAAM,CAACtF,EAAG6B,EAAMC,KAC9B,GACL,GAAoB,GAAoB,ICJ7B,gBAAcL,EAU5B,YAAYnB,EAAQC,EAAU,IAM7B,GALIA,EAAQuF,OACXvF,EAAQwF,OAASjI,OAAO6B,KAAKY,EAAQuF,OAEtCpE,MAAMpB,EAAQC,GAEVC,KAAKwF,OAAQ,CAChBxF,KAAKyF,SAAWzF,KAAKwF,OAAOC,SAC5BzF,KAAK0F,kBAAoB1F,KAAKwF,OAAOE,kBACrC1F,KAAK2F,gBAAkB3F,KAAKwF,OAAOG,gBACnC3F,KAAK4F,kBAAoB,GACzB5F,KAAK6F,gBAAkB,GACvB7F,KAAK8F,iBAAmB,GACxB,IAAIC,EAAQ/F,KAAKuF,OAAO,GACxBjI,OAAO6B,KAAKa,KAAKwF,OAAOK,iBAAiBtG,QAAQyG,IAChD,IAAIC,EAAQF,EAAQ,IAAMC,EAC1BhG,KAAK4F,kBAAkBlF,KAAKuF,GAC5BjG,KAAK6F,gBAAgBI,GAASjG,KAAKwF,OAAOK,gBAAgBG,GAC1DhG,KAAK8F,iBAAiBG,GAASjG,KAAKwF,OAAOM,iBAAiBE,KAE7DhG,KAAKkG,mBAAqBlG,KAAKwF,OAAOU,mBACtClG,KAAKmG,mBAAqBnG,KAAKwF,OAAOW,wBAEtCnG,KAAKyF,SAAW,EAAMzF,KAAKsF,KAAMtF,KAAKoG,OACtCpG,KAAK0F,kBAAoB1F,KAAKF,OAC9BE,KAAK2F,gBAAkB3F,KAAK8C,KAC5B9C,KAAK4F,kBAAoB5F,KAAKuF,OAC9BvF,KAAK6F,gBAAkB7F,KAAKsF,KAC5BtF,KAAK8F,iBAAmB9F,KAAKoG,MAC7BpG,KAAKkG,mBAAqBlG,KAAKqG,QAC/BrG,KAAKmG,mBAAqBnG,KAAKsG,UCjCnB,MAAM,UAAqB1C,EAUzC,cAAclB,GACb,OAAOxB,MAAMqF,cAAc7D,GAAOF,OAAOG,GACjC,EAAQD,EAAM6C,SAAW,EAAa7C,EAAM6C,SAAW,EAAM,EAAS5C,EAAS4C,QAAS,EAAS7C,EAAM6C,UAWhH,KAAK9B,GACJ,OAAIzD,KAAKqC,sBAAsBG,OAAOsB,GAAKA,EAAEhB,OAASW,EAAIX,MAAQgB,EAAEyB,SAAW9B,EAAI8B,QAAQvG,SAG3FgB,KAAKqC,sBAAsB3B,KAAK+C,GAChCzD,KAAKoC,UAAU7C,QAAQoD,IAClBc,EAAIvD,oBAAuByC,EAASE,OAAOC,MAAQH,EAASE,OAAOC,OAASW,EAAIX,MAGpFH,EAASuB,KAAKT,KAEfzD,KAAKqC,sBAAsB+B,OATnBX,EAgBT,uBAAuBnF,GACtB,OAAO4C,MAAMmD,gBAAgB/F,EAAQ,YAAa,GAMnD,oBAAoBA,GACnB,OAAO4C,MAAMoD,aAAahG,EAAQ,cCjDrB,gCACd,IAAKA,IAAW,EAAcA,GAC7B,MAAM,IAAImC,MAAM,kCAOjB,IAAI+F,GALA,EAAYjB,IAAW,EAAQA,IAAW,EAAaA,MAC1D1C,EAAS9D,UAAUC,OAAS,EAAIyH,EAAmB,GACnDA,EAAmBlB,EACnBA,EAAS,OAGNiB,EAAW,EAAalC,aAAahG,KACxCkI,EAASD,cAAc,CAAC3D,QAAQ6D,EAAkBlB,SAAQ1C,WAAStD,QAAQoD,IAC1E6D,EAASE,eAAe/D,MCjBZ,kBACdgE,EAAUrI,EAAQ,KAAM,CAACiE,KAAK,CAAC,cAAewD,EAAOjG,MCRvC,cACd,cAAclB,GCeA,oBAAgCgI,EAAW,IACzDZ,EAAO,EAASA,GAAM5G,QAEtB,IADA,IAAIyH,EAAQC,GACL,EAAaD,KAAW,EAAQA,IAAUb,EAAKhH,QAAQ,CAC7D,IAAI+H,EAAOf,EAAKd,QAChB,KAAMjB,EAAKxG,IAAMwG,EAAKxG,IAAIoJ,EAAOE,GAAS,EAAcF,GAASE,KAAQF,EAAQA,EAAME,IAEtF,YADAH,EAASI,QAAS,GAGnBH,EAAQ5C,EAAKxG,IAAMwG,EAAKxG,IAAIoJ,EAAOE,GAAQF,EAAME,GAGlD,OADAH,EAASI,QAAS,EACXH,GCfO,gBAAcrD,EAW5B,YAAYZ,EAAS2C,EAAS,KAAM1C,EAAS,IAU5C,GATA3B,QACAlB,KAAK4C,QAAUA,EACf5C,KAAKuF,OAASA,EACdvF,KAAK6C,OAASA,EAEd7C,KAAKiH,YAAc,EAASjH,KAAKuF,QACjCvF,KAAKkH,eAAiBlH,KAAKiH,YAAYzE,OACtCuD,GAASA,EAAM5C,QAAQ,OAAS,GAAK4C,EAAMoB,WAAW,MAAQpB,EAAMqB,SAAS,MAC5EpI,OACEgB,KAAKkH,gBAAkBlH,KAAKiH,YAAYjI,OAAS,EACpD,MAAM,IAAIyB,MAAM,yDAA2DT,KAAKiH,YAAYI,KAAK,MAAQ,+BAa3G,KAAK5D,GACAzD,KAAKmC,cAAiBnC,KAAK6C,OAAOC,MAAQ9C,KAAK6C,OAAOC,OAASW,EAAIX,MAGnEW,EAAIgC,WAAiC,IAArBzF,KAAK6C,OAAOyE,MAGhCtH,KAAKuH,aAAa9D,EAAK8B,IACtB,GAAIA,EAAQ,CAEX,IAAID,EAAO,GACPc,EAAQ,GAmCZ,OAlCyB,IAArBpG,KAAK6C,OAAOyC,MACfC,EAAOhG,QAAQwG,IAGd,IAAIyB,EAAY/D,EAAImC,kBAAkB6B,OAAO,CAACD,EAAWE,KAExD,IAAI7J,EAAQ4F,EAAIoC,gBAAgB6B,GAC5BC,EAASlE,EAAIqC,iBAAiB4B,GAClC,IAAKF,GAAazB,IAAU2B,EAC3B,MAAO,CAAC7J,EAAO8J,GAGhB,IAAKH,IAAczB,EAAQ,KAAKoB,WAAYO,EAAmB,KAAO,CACrE,IAAIE,ECvEG,mBACd,GAAc,IAAVC,EACH,OAAOC,EAER,IAAIC,EAAMC,EAAYF,EAAQG,YAAYJ,GAAUC,EAAQ3E,QAAQ0E,GACpE,OAAa,IAATE,EACI,GAEDD,EAAQI,OAAOH,EAAMF,EAAO7I,QD+DX,CAAU+G,EAAO2B,EAAmB,KACrD,MAAO,CAGN,EAAY7J,EAAO+J,EAAWO,MAAM,KAAM,CAAC1K,IAAI,IAC/C,EAAYkK,EAAQC,EAAWO,MAAM,KAAM,CAAC1K,IAAI,KAGlD,OAAO+J,GACL,MAEH,GAAIA,EACHlC,EAAK5E,KAAK8G,EAAUtC,SACpBkB,EAAM1F,KAAK8G,EAAUtC,aACf,CACN,IAAIkD,EAAe,EAAY3E,EAAI3D,OAAQ,EAAUiG,GAASA,EAAMoC,MAAM,KAAOpC,EAAO,CAACtI,IAAI,IAC7F6H,EAAK5E,KAAK0H,GACVhC,EAAM1F,KAAK0H,MAIP,EAASpI,KAAKuF,QAClB9B,EAAI4E,SAASrI,KAAK4C,QAAQ0C,EAAMc,EAAO3C,IACvCA,EAAI4E,SAASrI,KAAK4C,QAAQ0C,EAAK,GAAIc,EAAM,GAAI3C,IAE7C6B,EAAO,GACPc,EAAQ,GAcZ,OAbA3C,EAAI8B,OAAOhG,QAAQwG,IAGlB,IAAIqC,EAAerC,KAAStC,EAAI6B,KAC7B7B,EAAI6B,KAAKS,GACT,EAAUtC,EAAI3D,OAAQiG,GACrBuC,EAAYvC,KAAStC,EAAI2C,MAC1B3C,EAAI2C,MAAML,GACVqC,EACH9C,EAAKS,GAASqC,EACdhC,EAAML,GAASuC,IAGT7E,EAAI4E,SAASrI,KAAK4C,QAAQ0C,EAAMc,EAAO3C,MAWhD,aAAaA,EAAK7D,GACjB,GAAII,KAAKiH,YAAYjI,OAAQ,CAC5B,IAAIuJ,EAAuB,GACbvI,KAAKiH,YAAYzE,OAAO,CAACgG,EAAe5L,KACrD4L,EAAgB,EAAUA,GACvBA,EAAcC,QAAQ,KAAM,IAC5BD,EACHD,EAAqB3L,GAAK,GAGnB6G,EAAImC,kBAAkBpD,OAAOkG,IACnC,IAAIC,EAA6BD,EAAsBP,MAAM,KACzDS,EAA8B5I,KAAKkH,eACpCsB,EAAcL,MAAM,KAAKU,IAAI,CAACC,EAAKtJ,IAAMsJ,GAAOH,EAA2BnJ,IAAM,IAAI6H,KAAK,KAC1FmB,EAEH,OADA,EAAYD,EAAqB3L,GAAIgM,IAC7BA,IAAgCF,IAA0BjF,EAAI+B,SACvC,IAA1BxF,KAAK6C,OAAOkG,YAAwBH,EAA8B,KAAKzB,WAAWuB,EAAwB,MAC1G1I,KAAK6C,OAAOmG,cAAgBN,EAAwB,KAAKvB,WAAWyB,EAA8B,SAChG5I,KAAKkH,iBAAmB0B,EAA4BT,MAAM,KAAK3F,OAAOsG,IAAQA,GAAK9J,UACxFA,SACDA,SE5IS,EF8IAuJ,EE7IPvF,EAAIyE,OAAO,CAACwB,EAAWC,KAC7B,IAAIC,EAAW,GAQf,OAPAF,EAAU1J,QAAQ6J,IACjB,EAASF,GAAQ3J,QAAQ2J,IACxB,IAAIG,EAAOD,EAAIhK,QACfiK,EAAK3I,KAAKwI,GACVC,EAASzI,KAAK2I,OAGTF,GACL,CAAC,MFmIgC5J,QAAQK,QAE/BI,KAAKuF,QACX9B,EAAI+B,SAAUxF,KAAK6C,OAAOmG,aAC/BpJ,IElJY,QCOA,4BACd,IAAKtB,IAAW,EAAcA,GAC7B,MAAM,IAAImC,MAAM,kCAOjB,GALI,EAAY8E,KACf1C,EAAS9D,UAAUC,OAAS,EAAIY,EAAW,GAC3CA,EAAW2F,EACXA,EAAS,OAEL,EAAY3F,GAChB,MAAM,IAAIa,MAAM,iCAAmC,EAASb,GAAY,YAEzE,IAAI4G,EAIJ,OAHMA,EAAW,EAAalC,aAAahG,MAC1CkI,EAAW,EAAanC,gBAAgB/F,IAElCkI,EAAS8C,YAAY,IAAIC,EAAS3J,EAAU2F,EAAQ1C,KClB7C,kBACd,IAAI2D,EACJgD,EAAQlL,EAAQ,CAACmL,EAASC,EAAU5F,KACnC,GAAI0C,EAAW,EAAalC,aAAaxE,GAAS,CACjD,IAAI6J,EAAO,EAAS5D,EAAOzH,GAC3B,OAAOkI,EAAStC,KAAK,IAAI0F,EAAc9J,EAAQ,CAACgD,KAAKgB,EAAEhB,KAAM+G,UAAS,EAAMvE,KAAKqE,EAAMvD,MAAMuD,EAAMnE,OAAO1B,OAEzG,CAACkF,aAAY,EAAMzG,KAAK,CAAC,cAAewD,EAAOjG,MCApC,0BACd,IAAIgK,EAAUC,EAAQlB,IAAI,CAAC/I,EAAQlD,KAClC,IAAKkD,IAAW,EAAcA,GAC7B,MAAM,IAAIW,MAAM,kCAEjB,MAAO,CACNX,SACAkK,WAAY,EAAMlK,EAAQX,GAC1B8K,QAAS,GACTC,SAAU,GACVC,QAAS,GACTC,SAAU,GACV/D,QAAS,GACTC,QAAS,MAIP3E,EAAS/B,KAAYmK,GA4DzB,OA1DAD,EAAQjB,IAAIwB,IACX,ICrCa,EDsET5G,EAAK6G,EAjCLC,EAAcjN,OAAO6B,KAAKkL,EAAML,YAChCQ,EAAclN,OAAO6B,KAAKkL,EAAMvK,QAChC2K,GCvCS,EDuCaF,EAAYG,OAAOF,GCnCvCxH,EAAIR,OAHM,CAAC3E,EAAOkG,EAAO4G,IACxBA,EAAKxH,QAAQtF,KAAWkG,IDqC4BvB,OAAOrE,IACjE,KAAKgB,EAAKH,SAAWG,EAAKyL,SAASzM,IAC/B,EAASkM,EAAMvK,UAAoB,WAAR3B,GAA4B,YAARA,IADnD,CAeA,GAXKqM,EAAYI,SAASzM,IAKzBkM,EAAMH,SAAS/L,GAAOkM,EAAML,WAAW7L,GACvCkM,EAAMJ,QAAQ9L,GAAOkM,EAAMvK,OAAO3B,GAC7BoM,EAAYK,SAASzM,IACzBkM,EAAMhE,QAAQ3F,KAAKvC,KAPpBkM,EAAMD,SAASjM,GAAOkM,EAAML,WAAW7L,GACvCkM,EAAMF,QAAQhM,QAAOc,EACrBoL,EAAM/D,QAAQ5F,KAAKvC,IAQhBkM,EAAML,WAAW7L,KAASkM,EAAMvK,OAAO3B,GAS1C,OAPIkM,EAAML,WAAW7L,IAAQ,EAAckM,EAAML,WAAW7L,KAC3D0M,EAAOR,EAAMvK,OAAQ3B,EAAKkM,EAAML,WAAW7L,IAGxCkM,EAAMvK,OAAO3B,IAAQ,EAAckM,EAAMvK,OAAO3B,KACnD,EAAKkM,EAAMvK,OAAQ3B,EAAKkM,EAAMvK,OAAO3B,KAE/B,SAEDkM,EAAMJ,QAAQ9L,UACdkM,EAAMH,SAAS/L,MAyBvB,QArBKmM,EAAe,EAAahG,aAAa+F,EAAMvK,UAAYgL,KAC/DrH,EAAM,IAAImG,EAAcS,EAAMvK,OAAQ,CACrCgD,KAAK,cACLwC,KAAK,EAAO+E,EAAMJ,QAASI,EAAMF,SACjC/D,MAAM,EAAOiE,EAAMH,SAAUG,EAAMD,UACnC/D,QAAQgE,EAAMhE,QACdC,QAAQ+D,EAAM/D,UAEXgE,IACChN,OAAO6B,KAAKkL,EAAMF,SAASnL,QAC9ByE,EAAI4E,SAASiC,EAAapG,KACzB,IAAI0F,EAAcS,EAAMvK,OAAQ,CAACgD,KAAK,MAAOwC,KAAK+E,EAAMF,QAAS/D,MAAMiE,EAAMD,SAAU9D,QAAQ+D,EAAM/D,YAGnGhJ,OAAO6B,KAAKkL,EAAMJ,SAASjL,QAC9ByE,EAAI4E,SAASiC,EAAapG,KACzB,IAAI0F,EAAcS,EAAMvK,OAAQ,CAACgD,KAAK,MAAOwC,KAAK+E,EAAMJ,QAAS7D,MAAMiE,EAAMH,SAAU7D,QAAQgE,EAAMhE,cAKlGyE,EAAcrH,EAAMgH,IAErB9I,GE/EO,gBACd,IAAK7B,IAAW,EAAcA,GAC7B,MAAM,IAAIW,MAAM,kCAIjB,IAAI5C,EAAOkN,EChBG,EDgBOC,EAAa,SAASrD,GAC1C,OAAO5I,UAAUC,OAAS2I,EAAU,EAASxI,GAAQ,EAASA,EAAMW,GAAUA,EAAOX,IAStF,OANCtB,GADGkN,EAAW,EAASzG,aAAaxE,IAC5BiL,EAAS7G,KAAK,IAAI+G,EAAWnL,EAAQ,CAACgD,KAAK,MAAOJ,MAAMvD,IAAQ6L,GAEhEA,KAIL,EAASlL,IAAY,EAAWX,KAAS,EAAYtB,ICzBlD,EADO,ED0B+DA,ICzB9C,YAAYqN,KAAKC,SAAS3M,UAAUkB,SAAS3C,KAAK6B,IDgC1Ef,EANC,YAAqCsG,GAC3C,OAAOiH,EAAY,CAACtL,GAAS,IACrBjC,EAAMwN,MAAMvL,EAAQqE,MEjChB,gBACd,OAAOnB,EAAIyE,OAAO,CAAC6D,EAAU9G,IAAQ8G,GAAY1L,EAAS4E,IAAM,ICOlD,gBACd,IAAK1E,IAAW,EAAcA,GAC7B,MAAM,IAAIW,MAAM,kCAIjB,IAAIsK,EAAUQ,EAAa,SAASC,GACnC,OAAOzM,UAAUC,OAASwM,EAAUrN,KAAO2B,GAE5C,OAAIiL,EAAW,EAASzG,aAAaxE,IAC7BiL,EAAS7G,KAAK,IAAI+G,EAAWnL,EAAQ,CAACgD,KAAK,MAAOJ,MAAMvE,IAAOoN,GAEhEA,KCEO,8BACd,IAAKzL,IAAW,EAAcA,GAC7B,MAAM,IAAIW,MAAM,kCAEb,EAAUgL,KACbX,EAAcjN,GAEf,IA8DI4F,EAAK6G,EA9DLnL,EAAOsM,EAAerF,EAAQ,GAAId,EAAO,GAAIe,EAAU,GACvDqF,EAAY,CAACvN,EAAKN,EAAO8N,KAM5B,IAAIC,EALJxF,EAAMjI,GAAO2B,EAAO3B,GACf,EAAU2B,EAAQ3B,IACtBkI,EAAQ3F,KAAKvC,GAIV0N,IAEHhO,GADA+N,EAAa/N,GAAS,IACHA,OAGpB,IAAIiO,EAASf,EAAUgB,EAAa,SAASC,GAC5C,OAAKjN,UAAUC,OAQRgN,GAPFJ,EACHtO,OAAOC,eAAeuC,EAAQ3B,EAAKyN,GAEnC9L,EAAO3B,GAAON,GAER,IAIT,GAAIkN,EAAW,EAASzG,aAAaxE,GAAS,CAC7C,IAAIC,EAAU6L,EACX,CAAC9I,KAAK,MAAOJ,MAAMvE,EAAKyN,aAAYD,WACpC,CAAC7I,KAAK,MAAOJ,MAAMvE,EAAKN,QAAO8N,WAClCG,EAAUf,EAAS7G,KAAK,IAAI+G,EAAWnL,EAAQC,GAAUgM,QAEzDD,EAAUC,IAqBX,OAlBID,GACHxG,EAAKnH,GAAON,EACRyH,EAAKnH,KAASiI,EAAMjI,IAEnBiI,EAAMjI,IAAQ,EAAciI,EAAMjI,KACrC0M,EAAO/K,EAAQ3B,EAAKiI,EAAMjI,IAGvBmH,EAAKnH,IAAQ,EAAcmH,EAAKnH,KACnC,EAAK2B,EAAQ3B,EAAKmH,EAAKnH,aAGjBmH,EAAKnH,UACLiI,EAAMjI,YAGPiI,EAAMjI,GAEP2N,GAGJG,EAAgB,GACpB,GAAI,EAAS9M,KAAW,EAAUA,IAAS,EAAUA,MAAWA,EAAO,EAASA,IAC/E8M,EAAgB9M,EAAK0J,IAAI1K,GAAOuN,EAAUvN,EAAKN,EAAOsB,SAChD,GAAI,EAAUsM,GAAgB,CACpC,IAAIS,EAAc5O,OAAO6B,KAAKsM,GAC9BQ,EAAgBC,EAAYrD,IAAI1K,GAAOuN,EAAUvN,EAAKsN,EAActN,GAAM+N,IAU3E,QANK5B,EAAe,EAAahG,aAAaxE,KAAYgL,KACzDrH,EAAM,IAAImG,EAAc9J,EAAQ,CAACgD,KAAK,MAAOwC,OAAMc,QAAOC,YACtDiE,GACHA,EAAapG,KAAKT,IAGbqH,EAAcrH,EAAM,EAAKwI,EAAeE,GAASA,IC1F1C,4BACd,OAAOC,GAAS,KAAoBrN,YCFtB,gBACd,EAASI,GAAMI,QAAQpB,IACtB,IAAyBkO,EAAWC,EAAhCzO,EAAQiC,EAAO3B,GACfoO,EAAoBjP,OAAO+H,yBAAyBvF,EAAQ3B,IAC7D,CAACX,aAAYW,KAAO2B,IACnB,UAAWyM,UACPA,EAAkB1O,MAEtB,aAAc0O,UACVA,EAAkBC,SAE1BD,EAAkB9O,IAAM,KACvB,GAAI4O,EACH,OAAOxO,EAERwO,GAAY,EACZ,IAAI1E,EAAS,EAAU7H,EAAQ3B,GAE/B,OADAkO,GAAY,EACL1E,GAER4E,EAAkBhJ,IAAMkJ,IACvB,GAAIH,EAEH,OADAzO,EAAQ4O,GACD,EAERH,GAAY,EACA,EAAUxM,EAAQ3B,EAAKsO,GAEnC,OADAH,GAAY,GACL,GAERhP,OAAOC,eAAeuC,EAAQ3B,EAAKoO,MC7BtB,gBACd,IAAKzM,IAAW,EAAcA,GAC7B,MAAM,IAAIW,MAAM,kCAIjB,IAAIsK,EAAU2B,EAAc,SAASC,GACpC,OAAO5N,UAAUC,OAAS2N,EACzBC,EAAUtP,OAAOsH,oBAAoB9E,GAAUxC,OAAO6B,KAAKW,IAG7D,OAAIiL,EAAW,EAASzG,aAAaxE,IAC7BiL,EAAS7G,KAAK,IAAI+G,EAAWnL,EAAQ,CAACgD,KAAK8J,EAAU,UAAY,SAAUF,GAE5EA,KCjBO,cACd,OAAOG,GAAU,KAAqB9N,YCIxB,ICFA,4BACd,OAAOqN,GAAS,KAAmBrN,YCMrB,qBACd,IAAKe,IAAW,EAAcA,GAC7B,MAAM,IAAIW,MAAM,kCAEbtB,EAAO,EAASA,GAApB,IA+BIsE,EAAK6G,EA/BkBlE,EAAQ,GAAId,EAAO,GAAIgB,EAAU,GACxD2F,EAAgB9M,EAAK0J,IAAI1K,IAC5BiI,EAAMjI,GAAO2B,EAAO3B,GAChB,EAAU2B,EAAQ3B,IACrBmI,EAAQ5F,KAAKvC,GAId,IAAI2N,EAASf,EAAU+B,EAAa,SAASd,GAC5C,OAAKjN,UAAUC,OAIRgN,UAHClM,EAAO3B,IACP,IAiBT,OAZC2N,GADGf,EAAW,EAASzG,aAAaxE,IAC1BiL,EAAS7G,KAAK,IAAI+G,EAAWnL,EAAQ,CAACgD,KAAK,MAAOJ,MAAMvE,EAAKwN,QAAQxM,IAAQ2N,GAE7EA,OAIVxH,EAAKnH,QAAOc,EAERmH,EAAMjI,IAAQ,EAAciI,EAAMjI,KACrC0M,EAAO/K,EAAQ3B,EAAKiI,EAAMjI,KAGrB2N,IAUR,QANKxB,EAAe,EAAahG,aAAaxE,KAAYgL,KACzDrH,EAAM,IAAImG,EAAc9J,EAAQ,CAACgD,KAAK,MAAOwC,OAAMc,QAAOE,YACtDgE,GAAgBhN,OAAO6B,KAAKmG,GAAMtG,QACrCsL,EAAapG,KAAKT,IAGbqH,EAAcrH,EAAM,EAAKwI,EAAeE,GAASA,ICvD1C,MAAM,UAAqBvI,EASzC,KAAKH,GAOJ,OANAzD,KAAKoC,UAAU7C,QAAQwN,IAClBtJ,EAAIvD,oBAGR6M,EAAS7I,KAAKT,KAERA,EAMR,uBAAuBnF,EAAQ0O,EAAS,GACvC,OAAO9L,MAAMmD,gBAAgB/F,EAAQ,YAAa0O,GAMnD,oBAAoB1O,GACnB,OAAO4C,MAAMoD,aAAahG,EAAQ,cC9BrB,oBAAckF,EAU5B,YAAYZ,EAASC,EAAS,IAC7B3B,QACAlB,KAAK4C,QAAUA,EACf5C,KAAK6C,OAASA,EAYf,KAAKY,GACAzD,KAAK6C,OAAOC,OAASW,EAAIX,MAC5BW,EAAI4E,SAASrI,KAAK4C,QAAQ7F,KAAKiD,KAAKF,OAAQ2D,EAAIK,MCHpC,QACdmJ,MCjBc,SAASA,EAAMnN,EAAQoN,GAAQ,GAC7C,IAAKpN,IAAW,EAAcA,GAC7B,MAAM,IAAIW,MAAM,kCAGjB,IAAItB,EAAO,EAAWW,GACtBX,EAAKI,QAAQpB,IACZ,IAAIN,EAAQ,EAAUiC,EAAQ3B,GAC1B,EAAcN,IAAUA,IAC3B,EAAKiC,EAAQ3B,EAAKN,GAClBoP,EAAMpP,EAAOqP,MAGXA,GACHC,EAAKrN,EAAQX,IDIdqK,UACA7C,YACA1C,KLpBc,mBACd,IAAK3F,IAAW,EAAcA,GAC7B,MAAM,IAAImC,MAAM,kCAEjB,IAAK,EAAYb,GAChB,MAAM,IAAIa,MAAM,iCAAmC,EAASb,GAAY,YAEzE,IAAI4G,EAIJ,OAHMA,EAAW,EAASlC,aAAahG,MACtCkI,EAAW,EAASnC,gBAAgB/F,IAE9BkI,EAAS8C,YAAY,IAAI8D,EAAKxN,EAAUiD,KKU/CwK,OExBc,wBACd,IAAK/O,IAAW,EAAcA,GAC7B,MAAM,IAAImC,MAAM,kCAEjB,IAAI+F,GACAA,EAAW,EAAalC,aAAahG,KACxCkI,EAASD,cAAc,CAAC3D,QAAQ6D,EAAkB5D,WAAStD,QAAQ0E,IAClEuC,EAASE,eAAezC,MFkB1BqJ,MACA/P,eAZsB+P,EAatB/J,MACAgK,MACAC,eAhBsBD,EAiBtBE,KAAA,EACA5C,SACAO,cACA3N,IAAA,EACAiQ,MACAP,OACAhO,KAAA,EACAyN,QGvCc,YACd,OAAOC,GAAU,KAAoB9N,YHuCrC4O,GIpCc,qBACd,IAAInH,EAIJ,OAHMA,EAAW,EAAalC,aAAahG,MAC1CkI,EAAW,EAAanC,gBAAgB/F,IAElCkI,EAAS8C,YAAY,IAAIsE,EAAShO,EAAU,EAAOiD,EAAQ,CAACC,YJgCnE+K,IKvCc,0BACd,IAAIrH,GACAA,EAAW,EAAalC,aAAahG,KACxCkI,EAASD,cAAc,CAAC3D,QAAQ6D,EAAkB3D,OAAMD,WAAStD,QAAQwN,IACxEvG,EAASE,eAAeqG,MLoC1Be,QMvCc,mBACd,IAAItH,EACJ,GAAIA,EAAW,EAAalC,aAAahG,GACxC,OAAOkI,EAAStC,KAAK,IAAIjD,EAAM3C,EAAQ,EAAOgH,EAAM,CAACxC,YNsCtD8G,gBACAqB,aACAhK,SOrDI8M,OAAOC,YACXD,OAAOC,UAAY,IAEpBD,OAAOC,UAAUC,OAAS","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","\r\n/**\r\n * Tells if val is of type \"function\".\r\n * This holds true for both regular functions and classes.\r\n *\r\n * @param object\t \tval\r\n *\r\n * @return bool\r\n */\r\nexport default function(val) {\r\n\treturn typeof val === 'function';\r\n};\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport _isTypeFunction from './isTypeFunction.js';\r\n\r\n/**\r\n * Tells if val is of type \"object\".\r\n * This holds true for anything object, including built-ins.\r\n *\r\n * @param object\t \tval\r\n *\r\n * @return bool\r\n */\r\nexport default function(val) {\r\n\treturn Array.isArray(val) || typeof val === 'object' || _isTypeFunction(val);\r\n};\r\n","\r\n/**\r\n * Tells if val is of type \"array\".\r\n *\r\n * @param object\t \tval\r\n *\r\n * @return bool\r\n */\r\nexport default function(val) {\r\n\treturn Array.isArray(val);\r\n};\r\n","\r\n/**\r\n * Tells if val is of type \"string\".\r\n *\r\n * @param string \tval\r\n *\r\n * @return bool\r\n */\r\nexport default function(val) {\r\n\treturn typeof val === 'string';\r\n};\r\n","\r\n/**\r\n * Tells if val is undefined or is of type \"undefined\".\r\n *\r\n * @param string \tval\r\n *\r\n * @return bool\r\n */\r\nexport default function(val) {\r\n\treturn arguments.length && (val === undefined || typeof val === 'undefined');\r\n};\r\n","\r\n/**\r\n * Tells if val is undefined or is null.\r\n *\r\n * @param string \tval\r\n *\r\n * @return bool\r\n */\r\nexport default function(val) {\r\n\treturn val === null || val === '';\r\n};\r\n","\r\n/**\r\n * Tells if val is pure object.\r\n *\r\n * @param object\t \tval\r\n *\r\n * @return bool\r\n */\r\nexport default function(val) {\r\n\treturn !Array.isArray(val) && typeof val === 'object' && val;\r\n};\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport _isArray from '../js/isArray.js';\r\nimport _isTypeArray from '../js/isTypeArray.js';\r\nimport _isEmpty from '../js/isEmpty.js';\r\nimport _isObject from '../js/isObject.js';\r\n\r\n/**\r\n * Casts an array-like object to an array.\r\n *\r\n * @param mixed \tval\r\n * @param bool\t \tcastObject\r\n *\r\n * @return array\r\n */\r\nexport default function(val, castObject = true) {\r\n\tif (_isArray(val)) {\r\n\t\treturn val;\r\n\t};\r\n\tif (!castObject && _isObject(val)) {\r\n\t\treturn [val];\r\n\t};\r\n\tif (val !== false && val !== 0 && _isEmpty(val)) {\r\n\t\treturn [];\r\n\t};\r\n\tif (_isTypeArray(val)) {\r\n\t\treturn Array.prototype.slice.call(val);\r\n\t};\r\n\tif (_isObject(val)) {\r\n\t\treturn Object.values(val);\r\n\t};\r\n\treturn [val];\r\n};\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport _isNull from './isNull.js';\r\nimport _isUndefined from './isUndefined.js';\r\nimport _isTypeObject from './isTypeObject.js';\r\n\r\n/**\r\n * Tells if val is empty in its own type.\r\n * This holds true for NULLs, UNDEFINED, FALSE, 0,\r\n * objects without keys, empty arrays.\r\n *\r\n * @param string \tval\r\n *\r\n * @return bool\r\n */\r\nexport default function(val) {\r\n\treturn _isNull(val) || _isUndefined(val) || val === false || val === 0 \r\n\t\t|| (_isTypeObject(val) && !Object.keys(val).length);\r\n};\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport _isString from './isString.js';\r\nimport _isUndefined from './isUndefined.js';\r\n\r\n/**\r\n * Tells if val is \"array-like\".\r\n * This holds true for anything that has a length property.\r\n *\r\n * @param object\t \tval\r\n *\r\n * @return bool\r\n */\r\nexport default function(val) {\r\n\treturn !_isString(val) && !_isUndefined(val.length);\r\n};\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport _isArray from '../js/isArray.js';\r\nimport _isString from '../js/isString.js';\r\n\r\n/**\r\n * Return an object for the given pair(s) of input.\r\n *\r\n * @param string|array \t\t\tkey\r\n * @param mixed|array\t\t\tval \r\n *\r\n * @return object\r\n */\r\nexport default function(key, val = null) {\r\n\tvar obj = {};\r\n\tif (arguments.length === 2) {\r\n\t\tif (_isString(key)) {\r\n\t\t\tobj[key] = val;\r\n\t\t} else if (_isArray(key) && _isArray(val)) {\r\n\t\t\tkey.forEach((k, i) => obj[k] = val[i]);\r\n\t\t}\r\n\t}\r\n\treturn obj;\r\n};\r\n","\r\n/**\r\n * Tells if val is of type \"string\" or a numeric string.\r\n * This holds true for both numbers and numeric strings.\r\n *\r\n * @param string \tval\r\n *\r\n * @return bool\r\n */\r\nexport default function(val) {\r\n\treturn val !== true && val !== false && val !== null && val !== '' && !isNaN(val * 1);\r\n};\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport _isTypeFunction from './isTypeFunction.js';\r\n\r\n/**\r\n * Tells if val is of type \"function\".\r\n *\r\n * @param object \t\tval\r\n *\r\n * @return bool\r\n */\r\nexport default function(val) {\r\n\treturn _isTypeFunction(val) || (val && {}.toString.call(val) === '[object function]');\r\n};\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport _isTypeObject from '../js/isTypeObject.js';\r\nimport _isNumeric from '../js/isNumeric.js';\r\n\r\n/**\r\n * Loops thru obj flatly with a callback function.\r\n * Stops when callback returns a non-undefined value.\r\n *\r\n * @param array|object \t\t\tobj \t\t\tThe array or object to iterate.\r\n * @param function \t\t\t\tcallback \t\tThe callback function.\r\n *\r\n * @return mixed|null\t\t\tAny non-null return from callback\r\n */\r\nexport default function(obj, callback) {\r\n\tvar returnValue = undefined;\r\n\tif (_isTypeObject(obj)) {\r\n\t\tObject.keys(obj).forEach((k, i) => {\r\n\t\t\tif (returnValue !== false) {\r\n\t\t\t\treturnValue = callback(_isNumeric(k) ? parseFloat(k) : k, obj[k], i);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\treturn returnValue;\r\n};\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport _isUndefined from '@web-native-js/commons/js/isUndefined.js';\r\nimport _isObject from '@web-native-js/commons/js/isObject.js';\r\nimport _each from '@web-native-js/commons/obj/each.js';\r\n\r\n/**\r\n * ---------------------------\r\n * The Event class\r\n * ---------------------------\r\n */\r\n\r\nexport default class {\r\n\t\r\n\t/**\r\n\t * Initializes the instance.\r\n\t *\r\n\t * @param array|object\t\ttarget\r\n\t * @param object\t\t\tdetails\r\n\t *\r\n\t * @return void\r\n\t */\r\n\tconstructor(target, details = {}) {\r\n\t\tthis.$ = {};\r\n\t\tthis.$.target = target;\r\n\t\tthis.$.details = details;\r\n\t\tthis.$.propagationStopped = false;\r\n\t\tthis.$.defaultPrevented = false;\r\n\t\tthis.$.promisesInstance = null;\r\n\t\tthis.$.promises = [];\r\n\t\t// -----------------------\r\n\t\t_each(details, (prop, value) => {\r\n\t\t\tif (prop !== '$') {\r\n\t\t\t\tObject.defineProperty(this, prop, {value});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Gets the \"target\" object.\r\n\t *\r\n\t * @return array|object\r\n\t */\r\n\tget target() {\r\n\t\treturn this.$.target;\r\n\t}\r\n\r\n\t/**\r\n\t * Gets the \"details\" object.\r\n\t *\r\n\t * @return object\r\n\t */\r\n\tget details() {\r\n\t\treturn this.$.details;\r\n\t}\r\n\r\n\t/**\r\n\t * -----------------------\r\n\t * RESPONSE HANDLERS\r\n\t * -----------------------\r\n\t */\r\n\r\n\t/**\r\n\t * Stops the evnt from reaching other listeners.\r\n\t *\r\n\t * @return bool\r\n\t */\r\n\tstopPropagation() {\r\n\t\tthis.$.propagationStopped = true;\r\n\t}\r\n\t\t\r\n\t/**\r\n\t * (Readonly) tells if stopPropagation() has been called.\r\n\t *\r\n\t * @return bool\r\n\t */\r\n\tget propagationStopped() {\r\n\t\treturn this.$.propagationStopped;\r\n\t}\r\n\t\t\r\n\t/**\r\n\t * Sets a disposition that asks event initiator not to\r\n\t * proceed with default action.\r\n\t *\r\n\t * @return void\r\n\t */\r\n\tpreventDefault() {\r\n\t\tthis.$.defaultPrevented = true;\r\n\t}\r\n\t\t\r\n\t/**\r\n\t * (Readonly) tells if preventDefault() has been called.\r\n\t *\r\n\t * @return bool\r\n\t */\r\n\tget defaultPrevented() {\r\n\t\treturn this.$.defaultPrevented;\r\n\t}\r\n\t\t\r\n\t/**\r\n\t * Sets a Promise disposition.\r\n\t *\r\n\t * @param Promise\tpromise\r\n\t *\r\n\t * @return void\r\n\t */\r\n\tpromise(promise) {\r\n\t\tif (!(promise instanceof Promise)) {\r\n\t\t\tthrow new Error('Event.promise() must be called with a Promise.');\r\n\t\t}\r\n\t\tthis.$.promises.push(promise);\r\n\t\tthis.$.promisesInstance = null;\r\n\t}\r\n\t\t\r\n\t/**\r\n\t * (Readonly) returns all promises.\r\n\t *\r\n\t * @return Promise|null\r\n\t */\r\n\tget promises() {\r\n\t\tif (!this.$.promisesInstance && this.$.promises.length) {\r\n\t\t\tthis.$.promisesInstance = Promise.all(this.$.promises);\r\n\t\t}\r\n\t\treturn this.$.promisesInstance;\r\n\t}\r\n\t\t\r\n\t/**\r\n\t * Evaluates the given disposition value and\r\n\t * calls an appropriate disposition method.\r\n\t *\r\n\t * @params mixed \trspns\r\n\t *\r\n\t * @return void\r\n\t */\r\n\tresponse(rspns) {\r\n\t\tvar proms;\r\n\t\tvar isEvent = _isObject(rspns) && !_isUndefined(rspns.propagationStopped) && !_isUndefined(rspns.defaultPrevented)\r\n\t\tif ((rspns === false) || (isEvent && rspns.propagationStopped)) {\r\n\t\t\tthis.stopPropagation();\r\n\t\t} else if ((rspns === false) || (isEvent && rspns.defaultPrevented)) {\r\n\t\t\tthis.preventDefault();\r\n\t\t} else if ((rspns instanceof Promise && (proms = rspns))\r\n\t\t|| (isEvent && (proms = rspns.promises))) {\r\n\t\t\tthis.promise(proms);\r\n\t\t}\r\n\t}\r\n};","\r\n/**\r\n * @imports\r\n */\r\nimport Event from './Event.js';\r\n\r\n/**\r\n * ---------------------------\r\n * The QueryEvent class\r\n * ---------------------------\r\n */\r\n\r\nexport default class extends Event {\r\n\t\r\n\t/**\r\n\t * Initializes the instance.\r\n\t *\r\n\t * @param array|object\t\ttarget\r\n\t * @param object\t\t\tdetails\r\n\t *\r\n\t * @return void\r\n\t */\r\n\tconstructor(target, details = {}) {\r\n\t\tsuper(target, details);\r\n\t}\r\n};","\r\n/**\r\n * Tells if val is of type \"number\".\r\n *\r\n * @param string \tval\r\n *\r\n * @return bool\r\n */\r\nexport default function(val) {\r\n\treturn typeof val === 'number';\r\n};\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport _isObject from './isObject.js';\r\n\r\n/**\r\n * Tells if an object is direct instance of Object.prototype.\r\n * Quite useful in differentiating native objects and class instances from plain objects ({}).\r\n *\r\n * @param object \tobj\r\n *\r\n * @return bool\r\n */\r\nexport default function(obj) {\r\n\treturn _isObject(obj) && Object.getPrototypeOf(obj) === Object.prototype;\r\n};\r\n","\r\n/**\r\n * Tells if val is undefined or is of type \"boolean\".\r\n *\r\n * @param string \tval\r\n *\r\n * @return bool\r\n */\r\nexport default function(val) {\r\n\treturn val === true || val === false;\r\n};\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport _isNumber from '../js/isNumber.js';\r\nimport _isArray from '../js/isArray.js';\r\nimport _isObject from '../js/isObject.js';\r\nimport _isTypeObject from '../js/isTypeObject.js';\r\nimport _isFunction from '../js/isFunction.js';\r\nimport _isPlainObject from '../js/isPlainObject.js';\r\nimport _compareCallback from './compareCallback.js';\r\n\r\n/**\r\n * Asserts (members of) the first value against (members of) subsequent values.\r\n * Assertion could be TRUE, FALSE, or custom.\r\n *\r\n * @param mixed \t\t\tobj1\r\n * @param mixed \t\t\tobj2\r\n * @param bool|function\t\tassertion\r\n * @param int\t\t\t\tdepth\r\n *\r\n * @return bool\r\n */\r\nconst _even = function(obj1, obj2, assertion = true, depth = 1) {\r\n\tif (_isArray(obj1) && _isArray(obj2) && obj1.length !== obj2.length) {\r\n\t\treturn !assertion;\r\n\t}\r\n\tif (_isObject(obj1) && _isObject(obj2)) {\r\n\t\tvar obj1Keys = Object.keys(obj1);\r\n\t\tvar obj2Keys = Object.keys(obj2);\r\n\t\tif (!obj1Keys.length && !obj2Keys.length) {\r\n\t\t\t// Objects that won't show keys must be compared by instance\r\n\t\t\t// Many native objects won't. So we can't judge by keys alone.\r\n\t\t\treturn _isPlainObject(obj1) && _isPlainObject(obj2) \r\n\t\t\t\t? assertion\r\n\t\t\t\t: (obj1 === obj2) === assertion;\r\n\t\t}\r\n\t\tif (!_even(obj1Keys, obj2Keys)) {\r\n\t\t\treturn !assertion;\r\n\t\t}\r\n\t}\r\n\tif (depth > 0 && ((_isArray(obj1) && _isArray(obj2)) || (_isObject(obj1) && _isObject(obj2)))) {\r\n\t\tvar result = _compareCallback(obj1, obj2, (v1, v2) => {\r\n\t\t\treturn _even(v1, v2, assertion, depth - 1);\r\n\t\t}, false/*netComparison*/, false/*contrast*/, true/*returnOnFirstFalse*/);\r\n\t\treturn _isArray(result) \r\n\t\t\t? result.length === obj1.length && result.length === obj2.length \r\n\t\t\t: (_isObject(result) && _isObject(obj1) \r\n\t\t\t\t? Object.keys(result).length === Object.keys(obj1).length && Object.keys(result).length ===  Object.keys(obj2).length \r\n\t\t\t\t: result);\r\n\t}\r\n\treturn _isFunction(assertion) ? assertion(obj1, obj2) : (\r\n\t\t_isNumber(obj1) && _isNumber(obj2) && isNaN(obj1) && isNaN(obj2) \r\n\t\t\t? assertion \r\n\t\t\t: (obj1 === obj2) === assertion\r\n\t);\r\n};\r\n\r\n/**\r\n * @exports\r\n */\r\nexport default _even;\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport _isArray from '../js/isArray.js';\r\nimport _isObject from '../js/isObject.js';\r\nimport _isTypeObject from '../js/isTypeObject.js';\r\nimport _isBoolean from '../js/isBoolean.js';\r\nimport _each from './each.js';\r\n\r\n/**\r\n * Gets the match(es) between (members of) two values;\r\n * assertion optionally custom.\r\n *\r\n * @param mixed \t\t\tob1\r\n * @param mixed \t\t\tobj2\r\n * @param string|function\tassertion\r\n * @param bool\t\t\t\tnetComparison\r\n * @param bool\t\t\t\tcontrast\r\n * @param bool\t\t\t\treturnOnFirstFalse\r\n *\r\n * @return bool|array|object\r\n */\r\nexport default function(obj1, obj2, assertion = true, netComparison = true, contrast = false, returnOnFirstFalse = false) {\r\n\tif (_isArray(obj1) && _isArray(obj2)) {\r\n\t\tvar result = [];\r\n\t\tvar contn = true;\r\n\t\tobj1.forEach(v1 => {\r\n\t\t\tif (!contn) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar testPass = false;\r\n\t\t\t_each(obj2, (k, v2) => {\r\n\t\t\t\tif (!testPass || (netComparison && _isTypeObject(v1))) {\r\n\t\t\t\t\ttestPass = assertion(v1, v2);\r\n\t\t\t\t\tif ((_isArray(testPass) && !testPass.length) || (_isObject(testPass) && !Object.keys(testPass).length)) {\r\n\t\t\t\t\t\ttestPass = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (_isTypeObject(testPass) && netComparison) {\r\n\t\t\t\t\t\t// Further recursions should use this testPass as v1\r\n\t\t\t\t\t\tv1 = testPass;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tif (_isTypeObject(testPass)) {\r\n\t\t\t\tresult.push(netComparison ? testPass : v1);\r\n\t\t\t} else if (!_isBoolean(testPass)) {\r\n\t\t\t\tresult.push(testPass);\r\n\t\t\t} else if ((contrast && !testPass) || (!contrast && testPass)) {\r\n\t\t\t\tresult.push(v1);\r\n\t\t\t} else if (returnOnFirstFalse) {\r\n\t\t\t\tcontn = false;\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn result;\r\n\t}\r\n\t\r\n\tif (_isObject(obj1) && _isObject(obj2)) {\r\n\t\tvar result = {};\r\n\t\tvar contn = true;\r\n\t\tObject.keys(obj1).forEach(k => {\r\n\t\t\tif (!contn) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar testPass = assertion(obj1[k], obj2[k]);\r\n\t\t\tif ((_isArray(testPass) && !testPass.length) || (_isObject(testPass) && !Object.keys(testPass).length)) {\r\n\t\t\t\ttestPass = false;\r\n\t\t\t}\r\n\t\t\tif (_isTypeObject(testPass)) {\r\n\t\t\t\tresult[k] = netComparison ? testPass : obj1[k];\r\n\t\t\t} else if (!_isBoolean(testPass)) {\r\n\t\t\t\tresult[k] = testPass;\r\n\t\t\t} else if ((contrast && !testPass) || (!contrast && testPass)) {\r\n\t\t\t\tresult[k] = obj1[k];\r\n\t\t\t} else if (returnOnFirstFalse) {\r\n\t\t\t\tcontn = false;\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn result;\r\n\t}\r\n};\r\n","\r\n/**\r\n * ---------------------------\r\n * The Fireable class\r\n * ---------------------------\r\n */\r\n\r\nexport default class {\r\n\t\r\n\t/**\r\n\t * Sets a \"disconnected\" flag on the Fireable.\r\n\t *\r\n\t * @return void\r\n\t */\r\n\tdisconnect() {\r\n\t\tthis.disconnected = true;\r\n\t}\r\n};","\r\n/**\r\n * @imports\r\n */\r\nimport _intersect from '@web-native-js/commons/arr/intersect.js';\r\nimport _isTypeObject from '@web-native-js/commons/js/isTypeObject.js';\r\nimport Fireable from './Fireable.js';\r\n\r\n/**\r\n * ---------------------------\r\n * The Firebase class\r\n * ---------------------------\r\n */\r\n\r\nexport default class {\r\n\t\r\n\t/**\r\n\t * Initializes the instance.\r\n\t *\r\n\t * @return void\r\n\t */\r\n\tconstructor() {\r\n\t\tthis.fireables = [];\r\n\t\tthis.currentlyFiringEvents = [];\r\n\t}\r\n\t\r\n\t/**\r\n\t * Adds an Fireable instance\r\n\t * with optional tags.\r\n\t *\r\n\t * @param Fireable\t\t\tfireable\r\n\t *\r\n\t * @return Fireable\r\n\t */\r\n\taddFireable(fireable) {\r\n\t\tthis.fireables.push(fireable);\r\n\t\treturn fireable;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Removes an Fireable instance\r\n\t * with optional tags.\r\n\t *\r\n\t * @param Fireable\t\t\tfireable\r\n\t * @param array\t\t\t\ttags\r\n\t *\r\n\t * @return void\r\n\t */\r\n\tremoveFireable(fireable, tags = []) {\r\n\t\tthis.fireables = this.fireables.filter(_fireable => _fireable !== fireable);\r\n\t}\r\n\t\r\n\t/**\r\n\t * Finds the Observer instances\r\n\t * with the given query parameters.\r\n\t *\r\n\t * @param object\t\t\tquery\r\n\t *\r\n\t * @return array\r\n\t */\r\n\tfindFireables(query) {\r\n\t\treturn this.fireables.filter(observer => {\r\n\t\t\treturn (!query.handler || observer.handler === query.handler) && (!query.params || (\r\n\t\t\t\t(!query.params.type || observer.params.type === query.params.type)\r\n\t\t\t\t&& (!query.params.tags || _intersect(observer.params.tags || [], query.params.tags).length === query.params.tags.length)\r\n\t\t\t));\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t * Create an object's firebase.\r\n\t *\r\n\t * @param array|object\tobject\r\n\t * @param string\t\ttype\r\n\t *\r\n\t * @return Firebase\r\n\t */\r\n\tstatic createForTarget (object, type, Base) {\r\n\t\tif (object && _isTypeObject(object)) {\r\n\t\t\tvar firebases;\r\n\t\t\tif (!(firebases = object[firebaseKey])) {\r\n\t\t\t\tfirebases = {};\r\n\t\t\t\tObject.defineProperty(object, firebaseKey, {\r\n\t\t\t\t\tget:() => firebases,\r\n\t\t\t\t\tset:value => {\r\n\t\t\t\t\t\tif (value !== firebases) {\r\n\t\t\t\t\t\t\tthrow new Error('Attempt to overwrite the \"' + firebaseKey + '\" special property!');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tenumerable:false,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tfirebases[type] = type === 'listeners' ? new Base(object) : new Base;\r\n\t\t\treturn firebases[type];\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Returns an object's firebase.\r\n\t *\r\n\t * @param array|object\tobject\r\n\t * @param string\t\ttype\r\n\t *\r\n\t * @return Firebase\r\n\t */\r\n\tstatic getForTarget(object, type) {\r\n\t\tvar firebases;\r\n\t\tif (object && _isTypeObject(object) && (firebases = object[firebaseKey])) {\r\n\t\t\treturn firebases[type];\r\n\t\t}\r\n\t}\r\n};\r\n\r\n/**\r\n * @var string\r\n */\r\nconst firebaseKey = '.reflex';\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport _isArray from '../js/isArray.js';\r\n\r\n/**\r\n * Returns the intersection of two arrays;\r\n * optionally using a custom matching function.\r\n *\r\n * @param array \tarr\r\n * @param array\t \tarr2\r\n * @param function \tcallback\r\n *\r\n * @return array\r\n */\r\nexport default function(arr, arr2, callback = null) {\r\n\treturn !_isArray(arr2) ? [] : arr.filter(val1 => callback \r\n\t\t? arr2.filter(val2 => callback(val1, val2)).length \r\n\t\t: arr2.indexOf(val1) !== -1\r\n\t);\r\n};\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport _arrFrom from '@web-native-js/commons/arr/from.js';\r\nimport QueryEvent from './QueryEvent.js';\r\nimport Fireable from './Fireable.js';\r\n\r\n/**\r\n * ---------------------------\r\n * The Trap class\r\n * ---------------------------\r\n */\r\n\r\nexport default class extends Fireable {\r\n\t\r\n\t/**\r\n\t * Initializes the instance.\r\n\t *\r\n\t * @param function\t\thandler\r\n\t * @param object\t\tparams\r\n\t *\r\n\t * @return void\r\n\t */\r\n\tconstructor(handler, params = {}) {\r\n\t\tsuper();\r\n\t\tthis.handler = handler;\r\n\t\tthis.params = params;\r\n\r\n\t}\r\n\t\r\n\t/**\r\n\t * Calls the observer's handler function\r\n\t * on matching with the event's fields.\r\n\t *\r\n\t * @param MutationEvent\t\t\t \tevt\r\n\t * @param function\t\t\t\t\tnext\r\n\t * @param mixed\t\t\t\t\t \trecieved\r\n\t *\r\n\t * @return void\r\n\t */\r\n\tfire(evt, next, recieved) {\r\n\t\tif (this.disconnected || (this.params.type && this.params.type !== evt.type)) {\r\n\t\t\treturn next(..._arrFrom(arguments).slice(2));\r\n\t\t}\r\n\t\treturn this.handler(evt, recieved, next);\r\n\t}\r\n};","\r\n/**\r\n * @imports\r\n */\r\nimport _even from '@web-native-js/commons/obj/even.js';\r\nimport QueryEvent from './QueryEvent.js';\r\nimport Firebase from './Firebase.js';\r\nimport Trap from './Trap.js';\r\n\r\n/**\r\n * ---------------------------\r\n * The Reactive class\r\n * ---------------------------\r\n */\r\n\r\nexport default class TrapBase extends Firebase {\r\n\t\r\n\t/**\r\n\t * Fires all observers with the given evt (change).\r\n\t *\r\n\t * @param Event\t\t\t\tevt\r\n\t * @param function\t\t\tdefaultHandler\r\n\t *\r\n\t * @return mixed\r\n\t */\r\n\tfire(evt, defaultHandler = null) {\r\n\t\tif (this.currentlyFiringEvents.filter(e => e.type === evt.type && e.query === evt.query).length) {\r\n\t\t\treturn defaultHandler ? defaultHandler() : undefined;\r\n\t\t}\r\n\t\tthis.currentlyFiringEvents.push(evt);\r\n\t\tconst next = (index, ..._args) => {\r\n\t\t\tvar trap = this.fireables[index];\r\n\t\t\tif (trap) {\r\n\t\t\t\treturn trap.fire(evt, (...args) => {\r\n\t\t\t\t\treturn next(index + 1, ...args);\r\n\t\t\t\t}/*next*/, ..._args);\r\n\t\t\t}\r\n\t\t\treturn defaultHandler ? defaultHandler(..._args) : _args[0];\r\n\t\t};\r\n\t\tvar value = next(0);\r\n\t\tthis.currentlyFiringEvents.pop();\r\n\t\treturn value;\r\n\t}\r\n\t\r\n\t/**\r\n\t * @inheritdoc\r\n\t */\r\n\tstatic createForTarget(object) {\r\n\t\treturn super.createForTarget(object, 'traps', TrapBase);\r\n\t}\r\n\t\r\n\t/**\r\n\t * @inheritdoc\r\n\t */\r\n\tstatic getForTarget(object) {\r\n\t\treturn super.getForTarget(object, 'traps');\r\n\t}\r\n};","\r\n/**\r\n * Adds an item if not already exist.\r\n *\r\n * @param array \tarr\r\n * @param array\t \t...itms\r\n *\r\n * @return array\r\n */\r\nexport default function(arr, ...items) {\r\n\titems.forEach(itm => {\r\n\t\tif (arr.indexOf(itm) < 0) {\r\n\t\t\tarr.push(itm);\r\n\t\t}\r\n\t});\r\n\treturn arr;\r\n};\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport _pushUnique from '../arr/pushUnique.js';\r\nimport _getPrototypeChain from './getPrototypeChain.js';\r\n\r\n/**\r\n * Eagerly retrieves object members all down the prototype chain.\r\n *\r\n * @param object\t \tobj\r\n * @param object\t \tuntil\r\n *\r\n * @return array\r\n */\r\nexport default function(obj, until) {\r\n\tvar keysAll = [];\r\n\t_getPrototypeChain(obj, until).forEach(obj => {\r\n\t\t_pushUnique(keysAll, ...Object.getOwnPropertyNames(obj));\r\n\t});\r\n\treturn keysAll;\r\n};\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport _isArray from '../js/isArray.js';\r\n\r\n/**\r\n * Returns the prototype chain.\r\n *\r\n * @param object \t\tobj\r\n * @param object\t \tuntil\r\n *\r\n * @return bool\r\n */\r\nexport default function(obj, until) {\r\n\tuntil = until || Object.prototype;\r\n\tuntil = until && !_isArray(until) ? [until] : until;\r\n\t// We get the chain of inheritance\r\n\tvar prototypalChain = [];\r\n\tvar obj = obj;\r\n\twhile((obj && (!until || until.indexOf(obj) < 0) && obj.name !== 'default')) {\r\n\t\tprototypalChain.push(obj);\r\n\t\tobj = obj ? Object.getPrototypeOf(obj) : null;\r\n\t}\r\n\treturn prototypalChain;\r\n};\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport _isArray from '../js/isArray.js';\r\nimport _isFunction from '../js/isFunction.js';\r\nimport _isObject from '../js/isObject.js';\r\nimport _isTypeObject from '../js/isTypeObject.js';\r\nimport _isNumeric from '../js/isNumeric.js';\r\nimport _getAllPropertyNames from './getAllPropertyNames.js';\r\n\r\n/**\r\n  * Merges values from subsequent arrays/objects first array/object;\r\n  * optionally recursive\r\n  *\r\n  * @param array ...objs\r\n  *\r\n  * @return void\r\n  */\r\nexport default function mergeCallback(objs, callback, deepProps = false, isReplace = false, withSymbols = true) {\r\n\tvar depth = 0;\r\n\tvar obj1 = objs.shift();\r\n\tif (_isNumeric(obj1) || obj1 === true || obj1 === false) {\r\n\t\tdepth = obj1;\r\n\t\tobj1 = objs.shift();\r\n\t}\r\n\tif (!objs.length) {\r\n\t\tthrow new Error('_merge() requires two or more array/objects.');\r\n\t}\r\n\tobjs.forEach((obj2, i) => {\r\n\t\tif (!_isTypeObject(obj2) && !_isFunction(obj2)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t(deepProps ? _getAllPropertyNames(obj2) : Object.getOwnPropertyNames(obj2)).forEach(key => {\r\n\t\t\tvar valAtObj1 = obj1[key];\r\n\t\t\tvar valAtObj2 = obj2[key];\r\n\t\t\tif (((_isArray(valAtObj1) && _isArray(valAtObj2)) || (_isObject(valAtObj1) && _isObject(valAtObj2))) \r\n\t\t\t&& (depth === true || depth > 0)) {\r\n\t\t\t\t// RECURSE...\r\n\t\t\t\tobj1[key] = _isArray(valAtObj1) && _isArray(valAtObj2) ? [] : {};\r\n\t\t\t\tmergeCallback([_isNumeric(depth) ? depth - 1 : depth, obj1[key], valAtObj1, valAtObj2], callback, deepProps, isReplace, withSymbols);\r\n\t\t\t} else if (callback(key, obj1, obj2, i)) {\r\n\t\t\t\tif (_isArray(obj1) && _isArray(obj2)) {\r\n\t\t\t\t\tif (isReplace) {\r\n\t\t\t\t\t\tobj1[key] = valAtObj2;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tobj1.push(valAtObj2);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// In case we're setting a read-only property\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tif (withSymbols) {\r\n\t\t\t\t\t\t\tObject.defineProperty(obj1, key, Object.getOwnPropertyDescriptor(obj2, key));\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tobj1[key] = obj2[key];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} catch(e) {}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\treturn obj1;\r\n};\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport _isArray from '../js/isArray.js';\r\nimport _isFunction from '../js/isFunction.js';\r\nimport _isNumeric from '../js/isNumeric.js';\r\nimport _isTypeObject from '../js/isTypeObject.js';\r\nimport _mergeCallback from './mergeCallback.js';\r\n\r\n/**\r\n * Copies an object.\r\n *\r\n * @param object\t \tobj\r\n * @param array\t\t \tfilter\r\n *\r\n * @return object\r\n */\r\nexport default function(obj, filter = [], withSymbols = true) {\r\n\tvar depth = 0;\r\n\tif (_isNumeric(arguments[0]) && _isTypeObject(arguments[1])) {\r\n\t\tdepth = arguments[0];\r\n\t\tobj = arguments[1];\r\n\t\tfilter = arguments[2] || [];\r\n\t}\r\n\treturn _mergeCallback([depth, {}, obj], (key, obj1, obj2) => {\r\n\t\treturn _isFunction(filter) ? filter(key) \r\n\t\t\t: (_isArray(filter) && filter.length ? filter.indexOf(key) > -1 : true);\r\n\t}, false/*deepProps*/, false/*isReplace*/, withSymbols);\r\n};\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport _mergeCallback from './mergeCallback.js';\r\n\r\n/**\r\n  * Merges values from subsequent arrays/objects first array/object;\r\n  * optionally recursive\r\n  *\r\n  * @param array ...objs\r\n  *\r\n  * @return void\r\n  */\r\nexport default function(...objs) {\r\n\treturn _mergeCallback(objs, (k, obj1, obj2) => {\r\n\t\treturn true;\r\n\t}, false/*deepProps*/, false/*isReplace*/, false/*withSymbols*/);\r\n};\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport _even from '@web-native-js/commons/obj/even.js';\r\nimport Event from './Event.js';\r\n\r\n/**\r\n * ---------------------------\r\n * The MutationEvent class\r\n * ---------------------------\r\n */\r\n\r\nexport default class extends Event {\r\n\t\r\n\t/**\r\n\t * Initializes the instance.\r\n\t *\r\n\t * @param array|object\t\ttarget\r\n\t * @param object\t\t\tdetails\r\n\t *\r\n\t * @return void\r\n\t */\r\n\tconstructor(target, details = {}) {\r\n\t\tif (details.data) {\r\n\t\t\tdetails.fields = Object.keys(details.data);\r\n\t\t}\r\n\t\tsuper(target, details);\r\n\t\t// -----------------------\r\n\t\tif (this.srcEvt) {\r\n\t\t\tthis.dataEven = this.srcEvt.dataEven;\r\n\t\t\tthis.originatingTarget = this.srcEvt.originatingTarget;\r\n\t\t\tthis.originatingType = this.srcEvt.originatingType;\r\n\t\t\tthis.originatingFields = [];\r\n\t\t\tthis.originatingData = {};\r\n\t\t\tthis._originatingData = {};\r\n\t\t\tvar field = this.fields[0];\r\n\t\t\tObject.keys(this.srcEvt.originatingData).forEach(path => {\r\n\t\t\t\tvar _path = field + '.' + path;\r\n\t\t\t\tthis.originatingFields.push(_path);\r\n\t\t\t\tthis.originatingData[_path] = this.srcEvt.originatingData[path];\r\n\t\t\t\tthis._originatingData[_path] = this.srcEvt._originatingData[path];\r\n\t\t\t});\r\n\t\t\tthis.originatingCreated = this.srcEvt.originatingCreated;\r\n\t\t\tthis.originatingDeleted = this.srcEvt.originatingDeleted;\r\n\t\t} else {\r\n\t\t\tthis.dataEven = _even(this.data, this._data);\r\n\t\t\tthis.originatingTarget = this.target;\r\n\t\t\tthis.originatingType = this.type;\r\n\t\t\tthis.originatingFields = this.fields;\r\n\t\t\tthis.originatingData = this.data;\r\n\t\t\tthis._originatingData = this._data;\r\n\t\t\tthis.originatingCreated = this.created;\r\n\t\t\tthis.originatingDeleted = this.deleted;\r\n\t\t}\r\n\t}\r\n};","\r\n/**\r\n * @imports\r\n */\r\nimport _even from '@web-native-js/commons/obj/even.js';\r\nimport _arrFrom from '@web-native-js/commons/arr/from.js';\r\nimport _intersect from '@web-native-js/commons/arr/intersect.js';\r\nimport _concatUnique from '@web-native-js/commons/arr/concatUnique.js';\r\nimport _exclude from '@web-native-js/commons/arr/exclude.js';\r\nimport _isUndefined from '@web-native-js/commons/js/isUndefined.js';\r\nimport _isNull from '@web-native-js/commons/js/isNull.js';\r\nimport MutationEvent from './MutationEvent.js';\r\nimport Firebase from './Firebase.js';\r\n\r\n/**\r\n * ---------------------------\r\n * The Reactive class\r\n * ---------------------------\r\n */\r\n\r\nexport default class ObserverBase extends Firebase {\r\n\t\r\n\t/**\r\n\t * Finds the Observer instances\r\n\t * with the given query parameters.\r\n\t *\r\n\t * @param object\t\t\tquery\r\n\t *\r\n\t * @return array\r\n\t */\r\n\tfindFireables(query) {\r\n\t\treturn super.findFireables(query).filter(observer => {\r\n\t\t\treturn _isNull(query.fields) || _isUndefined(query.fields) || _even(_arrFrom(observer.fields), _arrFrom(query.fields));\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t * Fires all observers with the given evt (change).\r\n\t *\r\n\t * @param Event\t\t\t\tevt\r\n\t *\r\n\t * @return Event\r\n\t */\r\n\tfire(evt) {\r\n\t\tif (this.currentlyFiringEvents.filter(e => e.type === evt.type && e.fields === evt.fields).length) {\r\n\t\t\treturn evt;\r\n\t\t}\r\n\t\tthis.currentlyFiringEvents.push(evt);\r\n\t\tthis.fireables.forEach(observer => {\r\n\t\t\tif (evt.propagationStopped || (observer.params.type && observer.params.type !== evt.type)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tobserver.fire(evt);\r\n\t\t});\r\n\t\tthis.currentlyFiringEvents.pop();\r\n\t\treturn evt;\r\n\t}\r\n\t\r\n\t/**\r\n\t * @inheritdoc\r\n\t */\r\n\tstatic createForTarget(object) {\r\n\t\treturn super.createForTarget(object, 'observers', ObserverBase);\r\n\t}\r\n\t\r\n\t/**\r\n\t * @inheritdoc\r\n\t */\r\n\tstatic getForTarget(object) {\r\n\t\treturn super.getForTarget(object, 'observers');\r\n\t}\r\n};","\r\n/**\r\n * @imports\r\n */\r\nimport _isNull from '@web-native-js/commons/js/isNull.js';\r\nimport _isFunction from '@web-native-js/commons/js/isFunction.js';\r\nimport _isTypeObject from '@web-native-js/commons/js/isTypeObject.js';\r\nimport _isUndefined from '@web-native-js/commons/js/isUndefined.js';\r\nimport ObserverBase from './internal/ObserverBase.js';\r\n\r\n/**\r\n * Removes an observer from an object's firebase.\r\n *\r\n * @param array|object\t\t\t\tobject\r\n * @param string|array|function\t\tfields\r\n * @param function\t\t\t\t\toriginalCallback\r\n * @param object\t\t\t\t\tparams\r\n *\r\n * @return void\r\n */\r\nexport default function(object, fields, originalCallback = null, params = {}) {\r\n\tif (!object || !_isTypeObject(object)) {\r\n\t\tthrow new Error('Object must be of type object!');\r\n\t}\r\n\tif (_isFunction(fields) || _isNull(fields) || _isUndefined(fields)) {\r\n\t\tparams = arguments.length > 2 ? originalCallback : {};\r\n\t\toriginalCallback = fields;\r\n\t\tfields = null;\r\n\t}\r\n\tvar firebase;\r\n\tif (firebase = ObserverBase.getForTarget(object)) {\r\n\t\tfirebase.findFireables({handler:originalCallback, fields, params}).forEach(observer => {\r\n\t\t\tfirebase.removeFireable(observer);\r\n\t\t});\r\n\t}\r\n}\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport unobserve from './unobserve.js';\r\n\r\n/**\r\n * Unbubble helper\r\n *\r\n * @param array|object\ttarget\r\n * @param string\t\tfield\r\n * @param array|object\tobject\r\n *\r\n * @return void\r\n */\r\nexport default function(target, field, object) {\r\n\tunobserve(object, null, {tags:['#e-bubbling', field, target]});\r\n}\r\n","\r\n/**\r\n * Returns the val's type.\r\n *\r\n * @param string \tval\r\n *\r\n * @return string\r\n */\r\nexport default function(val) {\r\n\treturn typeof val;\r\n};\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport _isTypeObject from '../js/isTypeObject.js';\r\nimport _isUndefined from '../js/isUndefined.js';\r\nimport _isNull from '../js/isNull.js';\r\nimport _arrFrom from '../arr/from.js';\r\n\r\n/**\r\n * Retrieves the value at the given path.\r\n *\r\n * A return value of undefined is ambiguous, and can mean either that the\r\n * path does not exist, or that the path actually exists but with a value of undefined. If it is required to\r\n * know whether the path actually exists, pass an object as a third argument.\r\n * This object will have an \"exists\" key set to true/false.\r\n *\r\n * @param object \t\t\t\tctxt\r\n * @param array \t\t\t\tpath\r\n * @param object \t\t\t\ttrap\r\n * @param object \t\t\t\treciever\r\n *\r\n * @return mixed\r\n */\r\nexport default function(ctxt, path, trap = {}, reciever = {}) {\r\n\tpath = _arrFrom(path).slice();\r\n\tvar _ctxt = ctxt;\r\n\twhile(!_isUndefined(_ctxt) && !_isNull(_ctxt) && path.length) {\r\n\t\tvar _key = path.shift();\r\n\t\tif (!(trap.get ? trap.get(_ctxt, _key) : (_isTypeObject(_ctxt) ? _key in _ctxt : _ctxt[_key]))) {\r\n\t\t\treciever.exists = false;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t_ctxt = trap.get ? trap.get(_ctxt, _key) : _ctxt[_key];\r\n\t}\r\n\treciever.exists = true;\r\n\treturn _ctxt;\r\n};\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport _crossJoin from '@web-native-js/commons/arr/crossJoin.js';\r\nimport _pushUnique from '@web-native-js/commons/arr/pushUnique.js';\r\nimport _arrFrom from '@web-native-js/commons/arr/from.js';\r\nimport _strAfter from '@web-native-js/commons/str/after.js';\r\nimport _isString from '@web-native-js/commons/js/isString.js';\r\nimport _isArray from '@web-native-js/commons/js/isArray.js';\r\nimport _commonsGet from '@web-native-js/commons/obj/get.js';\r\nimport Fireable from './Fireable.js';\r\nimport MutationEvent from './MutationEvent.js';\r\nimport reflexGet from '../get.js';\r\n\r\n/**\r\n * ---------------------------\r\n * The Observer class\r\n * ---------------------------\r\n */\r\n\r\nexport default class extends Fireable {\r\n\t\r\n\t/**\r\n\t * Initializes the instance.\r\n\t *\r\n\t * @param function\t\thandler\r\n\t * @param string|array\tfields\r\n\t * @param object\t\tparams\r\n\t *\r\n\t * @return void\r\n\t */\r\n\tconstructor(handler, fields = null, params = {}) {\r\n\t\tsuper();\r\n\t\tthis.handler = handler;\r\n\t\tthis.fields = fields;\r\n\t\tthis.params = params;\r\n\t\t// -----------------------\r\n\t\tthis.fieldsArray = _arrFrom(this.fields);\r\n\t\tthis.isDynamicField = this.fieldsArray.filter(\r\n\t\t\tfield => field.indexOf('..') > -1 || field.startsWith('.') || field.endsWith('.')\r\n\t\t).length;\r\n\t\tif (this.isDynamicField && this.fieldsArray.length > 1) {\r\n\t\t\tthrow new Error('Only one \"Dynamic Field\" must be observed at a time! \"' + this.fieldsArray.join(', ') + '\" have been bound together.');\r\n\t\t}\r\n\r\n\t}\r\n\t\r\n\t/**\r\n\t * Calls the observer's handler function\r\n\t * on matching with the event's fields.\r\n\t *\r\n\t * @param MutationEvent\t\t\t \tevt\r\n\t *\r\n\t * @return void\r\n\t */\r\n\tfire(evt) {\r\n\t\tif (this.disconnected || (this.params.type && this.params.type !== evt.type)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (evt.dataEven && this.params.diff !== false) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.fireCallback(evt, fields => {\r\n\t\t\tif (fields) {\r\n\t\t\t\t// Call listener...\r\n\t\t\t\tvar data = [];\r\n\t\t\t\tvar _data = [];\r\n\t\t\t\tif (this.params.data !== false) {\r\n\t\t\t\t\tfields.forEach(field => {\r\n\t\t\t\t\t\t// --------------------------\r\n\t\t\t\t\t\t// The NEW/OLD values of the change of field which could be a path\r\n\t\t\t\t\t\tvar fieldData = evt.originatingFields.reduce((fieldData, originatingField) => {\r\n\t\t\t\t\t\t\t// So field is the exact originatingField path?\r\n\t\t\t\t\t\t\tvar value = evt.originatingData[originatingField];\r\n\t\t\t\t\t\t\tvar _value = evt._originatingData[originatingField];\r\n\t\t\t\t\t\t\tif (!fieldData && field === originatingField) {\r\n\t\t\t\t\t\t\t\treturn [value, _value];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// Field matches, but is deeper than, originatingField path?\r\n\t\t\t\t\t\t\tif (!fieldData && (field + '.').startsWith((originatingField + '.'))) {\r\n\t\t\t\t\t\t\t\tvar fieldQuery = _strAfter(field, originatingField + '.');\r\n\t\t\t\t\t\t\t\treturn [\r\n\t\t\t\t\t\t\t\t\t// Notice we're using _commonsGet to dig the path\r\n\t\t\t\t\t\t\t\t\t// but with reflexGet as trap for \"reactive getting\"\r\n\t\t\t\t\t\t\t\t\t_commonsGet(value, fieldQuery.split('.'), {get:reflexGet}),\r\n\t\t\t\t\t\t\t\t\t_commonsGet(_value, fieldQuery.split('.'), {get:reflexGet})\r\n\t\t\t\t\t\t\t\t];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn fieldData;\r\n\t\t\t\t\t\t}, null);\r\n\t\t\t\t\t\t// --------------------------\r\n\t\t\t\t\t\tif (fieldData) {\r\n\t\t\t\t\t\t\tdata.push(fieldData.shift());\r\n\t\t\t\t\t\t\t_data.push(fieldData.shift());\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvar currentValue = _commonsGet(evt.target, _isString(field) ? field.split('.') : field, {get:reflexGet});\r\n\t\t\t\t\t\t\tdata.push(currentValue);\r\n\t\t\t\t\t\t\t_data.push(currentValue);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\treturn _isArray(this.fields) // NOTE:we're asking the original format!\r\n\t\t\t\t\t? evt.response(this.handler(data, _data, evt))\r\n\t\t\t\t\t: evt.response(this.handler(data[0], _data[0], evt));\r\n\t\t\t}\r\n\t\t\tvar data = {};\r\n\t\t\tvar _data = {};\r\n\t\t\tevt.fields.forEach(field => {\r\n\t\t\t\t// Remeber that evt.originatingData might actually be bubbling\r\n\t\t\t\t// in which case we don't expect to see eventName key.\r\n\t\t\t\tvar currentValue = field in evt.data \r\n\t\t\t\t\t? evt.data[field] \r\n\t\t\t\t\t: reflexGet(evt.target, field);\r\n\t\t\t\tvar prevValue = field in evt._data\r\n\t\t\t\t\t? evt._data[field] \r\n\t\t\t\t\t: currentValue;\r\n\t\t\t\tdata[field] = currentValue;\r\n\t\t\t\t_data[field] = prevValue;\r\n\t\t\t});\r\n\t\t\t// Call listener...\r\n\t\t\treturn evt.response(this.handler(data, _data, evt));\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t * Validates a proposed fire operation.\r\n\t *\r\n\t * @param MutationEvent\t\t \tevt\r\n\t *\r\n\t * @return bool\r\n\t */\r\n\tfireCallback(evt, callback) {\r\n\t\tif (this.fieldsArray.length) {\r\n\t\t\tvar dynamicFieldOutcomes = [];\r\n\t\t\tvar matches = this.fieldsArray.filter((observedField, i) => {\r\n\t\t\t\tobservedField = _isString(observedField) \r\n\t\t\t\t\t? observedField.replace(/`/g, '')\r\n\t\t\t\t\t: observedField;\r\n\t\t\t\tdynamicFieldOutcomes[i] = [];\r\n\t\t\t\t// one observedField can turn out to be two if dynamic\r\n\t\t\t\t// and evt.originatingFields is multiple\r\n\t\t\t\treturn evt.originatingFields.filter(inputOriginatingField => {\r\n\t\t\t\t\tvar inputOriginatingFieldSplit = inputOriginatingField.split('.');\r\n\t\t\t\t\tvar observedDynamicFieldOutcome = this.isDynamicField \r\n\t\t\t\t\t\t? observedField.split('.').map((seg, k) => seg || inputOriginatingFieldSplit[k] || '').join('.')\r\n\t\t\t\t\t\t: observedField;\r\n\t\t\t\t\t_pushUnique(dynamicFieldOutcomes[i], observedDynamicFieldOutcome);\r\n\t\t\t\t\treturn (observedDynamicFieldOutcome === inputOriginatingField && !evt.srcEvt\r\n\t\t\t\t\t\t|| (this.params.observeUp !== false && (observedDynamicFieldOutcome + '.').startsWith(inputOriginatingField + '.'))\r\n\t\t\t\t\t\t|| (this.params.observeDown && (inputOriginatingField + '.').startsWith(observedDynamicFieldOutcome + '.'))\r\n\t\t\t\t\t) && (!this.isDynamicField || !observedDynamicFieldOutcome.split('.').filter(seg => !seg).length);\r\n\t\t\t\t}).length;\r\n\t\t\t}).length;\r\n\t\t\tif (matches) {\r\n\t\t\t\t_crossJoin(dynamicFieldOutcomes).forEach(callback);\r\n\t\t\t}\r\n\t\t} else if (!this.fields/** if this.fieldsArray is empty because this.fields is null */\r\n\t\t\t&& (!evt.srcEvt || this.params.observeDown)) {\r\n\t\t\tcallback();\r\n\t\t}\r\n\t}\r\n};","\r\n/**\r\n * Return the remainder of a string after a given value.\r\n *\r\n * @param  string  subject\r\n * @param  string  search\r\n * @param  bool\t   afterLast\r\n *\r\n * @return string\r\n */\r\nexport default function(subject, search, afterLast = false) {\r\n\tif (search == '') {\r\n\t\treturn subject;\r\n\t}\r\n\tvar pos = afterLast ? subject.lastIndexOf(search) : subject.indexOf(search);\r\n\tif (pos === -1) {\r\n\t\treturn '';\r\n\t}\r\n\treturn subject.substr(pos + search.length);\r\n};\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport _arrFrom from './from.js';\r\n\r\n/**\r\n * Accepts a list of column and joins them to a table.\r\n *\r\n * @param array \tarr\r\n *\r\n * @return number\r\n */\r\nexport default function(arr) {\r\n\treturn arr.reduce((currTable, column) => {\r\n\t\tvar newTable = [];\r\n\t\tcurrTable.forEach(row => {\r\n\t\t\t_arrFrom(column).forEach(column => {\r\n\t\t\t\tvar _row = row.slice();\r\n\t\t\t\t_row.push(column);\r\n\t\t\t\tnewTable.push(_row);\r\n\t\t\t});\r\n\t\t});\r\n\t\treturn newTable;\r\n\t}, [[]]);\r\n};","\r\n/**\r\n * @imports\r\n */\r\nimport _isFunction from '@web-native-js/commons/js/isFunction.js';\r\nimport _isTypeObject from '@web-native-js/commons/js/isTypeObject.js';\r\nimport _getType from '@web-native-js/commons/js/getType.js';\r\nimport ObserverBase from './internal/ObserverBase.js';\r\nimport Observer from './internal/Observer.js';\r\n\r\n/**\r\n * Adds an observer to an object's firebase.\r\n *\r\n * @param array|object\t\t\t\tobject\r\n * @param string|array|function\t\tfields\r\n * @param function\t\t\t\t\tcallback\r\n * @param object\t\t\t\t\tparams\r\n *\r\n * @return Observer\r\n */\r\nexport default function(object, fields, callback = null, params = {}) {\r\n\tif (!object || !_isTypeObject(object)) {\r\n\t\tthrow new Error('Object must be of type object!');\r\n\t}\r\n\tif (_isFunction(fields)) {\r\n\t\tparams = arguments.length > 2 ? callback : {};\r\n\t\tcallback = fields;\r\n\t\tfields = null;\r\n\t}\r\n\tif (!_isFunction(callback)) {\r\n\t\tthrow new Error('Callback must be a function; \"' + _getType(callback) + '\" given!');\r\n\t}\r\n\tvar firebase;\r\n\tif (!(firebase = ObserverBase.getForTarget(object))) {\r\n\t\tfirebase = ObserverBase.createForTarget(object);\r\n\t}\r\n\treturn firebase.addFireable(new Observer(callback, fields, params));\r\n}\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport _objFrom from '@web-native-js/commons/obj/from.js';\r\nimport MutationEvent from './internal/MutationEvent.js';\r\nimport ObserverBase from './internal/ObserverBase.js';\r\nimport observe from './observe.js';\r\n\r\n/**\r\n * Bubble helper\r\n *\r\n * @param array|object\ttarget\r\n * @param string\t\tfield\r\n * @param array|object\tobject\r\n *\r\n * @return void\r\n */\r\nexport default function(target, field, object) {\r\n\tvar firebase;\r\n\tobserve(object, (entries, _entries, e) => {\r\n\t\tif (firebase = ObserverBase.getForTarget(target)) {\r\n\t\t\tvar base = _objFrom(field, object);\r\n\t\t\treturn firebase.fire(new MutationEvent(target, {type:e.type, bubbling:true, data:base, _data:base, srcEvt:e}));\r\n\t\t}\r\n\t}, {observeDown:true, tags:['#e-bubbling', field, target]});\r\n}\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport _copy from '@web-native-js/commons/obj/copy.js';\r\nimport _merge from '@web-native-js/commons/obj/merge.js';\r\nimport _unique from '@web-native-js/commons/arr/unique.js';\r\nimport _isTypeObject from '@web-native-js/commons/js/isTypeObject.js';\r\nimport _isArray from '@web-native-js/commons/js/isArray.js';\r\nimport MutationEvent from './internal/MutationEvent.js';\r\nimport ObserverBase from './internal/ObserverBase.js';\r\nimport unlink from './unlink.js';\r\nimport link from './link.js';\r\n\r\n/**\r\n * Executes a callback function on a target in \"transaction\" mode.\r\n * Fires any observers that may be bound to target on recorded changes.\r\n *\r\n * @param array\t\t\ttargets\r\n * @param function\t\tcallback\r\n * @param array\t\t\tkeys\r\n * @param bool\t\t\treturnEvent\r\n *\r\n * @return array|Event\r\n */\r\nexport default function(targets, callback, keys = [], returnEvent = false) {\r\n\tvar context = targets.map((target, i) => {\r\n\t\tif (!target || !_isTypeObject(target)) {\r\n\t\t\tthrow new Error('Target must be of type object!');\r\n\t\t}\r\n\t\treturn {\r\n\t\t\ttarget,\r\n\t\t\ttargetCopy: _copy(target, keys),\r\n\t\t\tsetData: {},\r\n\t\t\t_setData: {},\r\n\t\t\tdelData: {}, \r\n\t\t\t_delData: {},\r\n\t\t\tcreated: [],\r\n\t\t\tdeleted: [],\r\n\t\t};\r\n\t});\r\n\t// ---------------------------------\r\n\tvar result = callback(...targets);\r\n\t// ---------------------------------\r\n\tcontext.map(cntxt => {\r\n\t\tvar initialKeys = Object.keys(cntxt.targetCopy);\r\n\t\tvar currentKeys = Object.keys(cntxt.target);\r\n\t\tvar changedKeys = _unique(initialKeys.concat(currentKeys)).filter(key => {\r\n\t\t\tif ((keys.length && !keys.includes(key)) \r\n\t\t\t|| (_isArray(cntxt.target) && (key === 'length' || key === '.reflex'))) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (!currentKeys.includes(key)) {\r\n\t\t\t\tcntxt._delData[key] = cntxt.targetCopy[key];\r\n\t\t\t\tcntxt.delData[key] = undefined;\r\n\t\t\t\tcntxt.deleted.push(key);\r\n\t\t\t} else {\r\n\t\t\t\tcntxt._setData[key] = cntxt.targetCopy[key];\r\n\t\t\t\tcntxt.setData[key] = cntxt.target[key];\r\n\t\t\t\tif (!initialKeys.includes(key)) {\r\n\t\t\t\t\tcntxt.created.push(key);\r\n\t\t\t\t} \r\n\t\t\t}\r\n\t\t\tif (cntxt.targetCopy[key] !== cntxt.target[key]) {\r\n\t\t\t\t// Unobserve outgoing value for bubbling\r\n\t\t\t\tif (cntxt.targetCopy[key] && _isTypeObject(cntxt.targetCopy[key])) {\r\n\t\t\t\t\tunlink(cntxt.target, key, cntxt.targetCopy[key]);\r\n\t\t\t\t}\r\n\t\t\t\t// Observe incoming value for bubbling\r\n\t\t\t\tif (cntxt.target[key] && _isTypeObject(cntxt.target[key])) {\r\n\t\t\t\t\tlink(cntxt.target, key, cntxt.target[key]);\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tdelete cntxt.setData[key];\r\n\t\t\tdelete cntxt._setData[key];\r\n\t\t});\r\n\t\t// ---------------------------------\r\n\t\tvar evt, mutationBase;\r\n\t\tif ((mutationBase = ObserverBase.getForTarget(cntxt.target)) || returnEvent) {\r\n\t\t\tevt = new MutationEvent(cntxt.target, {\r\n\t\t\t\ttype:'transaction', \r\n\t\t\t\tdata:_merge(cntxt.setData, cntxt.delData),\r\n\t\t\t\t_data:_merge(cntxt._setData, cntxt._delData),\r\n\t\t\t\tcreated:cntxt.created,\r\n\t\t\t\tdeleted:cntxt.deleted\r\n\t\t\t});\r\n\t\t\tif (mutationBase) {\r\n\t\t\t\tif (Object.keys(cntxt.delData).length) {\r\n\t\t\t\t\tevt.response(mutationBase.fire(\r\n\t\t\t\t\t\tnew MutationEvent(cntxt.target, {type:'del', data:cntxt.delData, _data:cntxt._delData, deleted:cntxt.deleted})\r\n\t\t\t\t\t));\r\n\t\t\t\t}\r\n\t\t\t\tif (Object.keys(cntxt.setData).length) {\r\n\t\t\t\t\tevt.response(mutationBase.fire(\r\n\t\t\t\t\t\tnew MutationEvent(cntxt.target, {type:'set', data:cntxt.setData, _data:cntxt._setData, created:cntxt.created})\r\n\t\t\t\t\t));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn returnEvent ? evt : changedKeys;\r\n\t});\r\n\treturn result;\r\n}\r\n","\r\n/**\r\n * Returns a list of unique items.\r\n *\r\n * @param array\t \t\t\t\tarr\r\n *\t *\r\n * @return array\r\n */\r\nexport default function(arr) {\r\n\tconst distinct = (value, index, self) => {\r\n\t\treturn self.indexOf(value) === index;\r\n\t};\r\n\treturn arr.filter(distinct);\r\n};\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport _objFrom from '@web-native-js/commons/obj/from.js';\r\nimport _isArray from '@web-native-js/commons/js/isArray.js';\r\nimport _isNumeric from '@web-native-js/commons/js/isNumeric.js';\r\nimport _isClass from '@web-native-js/commons/js/isClass.js';\r\nimport _isFunction from '@web-native-js/commons/js/isFunction.js';\r\nimport _isTypeObject from '@web-native-js/commons/js/isTypeObject.js';\r\nimport QueryEvent from './internal/QueryEvent.js';\r\nimport TrapBase from './internal/TrapBase.js';\r\nimport transaction from './transaction.js';\r\n\r\n/**\r\n * Runs a \"get\" query operation on a target.\r\n * Fires any such query observers that may be bound to target.\r\n *\r\n * @param array|object\ttarget\r\n * @param string|array\tkeys\r\n *\r\n * @return mixed\r\n */\r\nexport default function(target, keys) {\r\n\tif (!target || !_isTypeObject(target)) {\r\n\t\tthrow new Error('Target must be of type object!');\r\n\t}\r\n\t// ---------------------------------\r\n\t// Execute any \"get\" traps, otherwise \"get\" the default way\r\n\tvar value, trapBase, defaultGet = function(_value) {\r\n\t\treturn arguments.length ? _value : (_isArray(keys) ? _objFrom(keys, target) : target[keys]);\r\n\t};\r\n\tif (trapBase = TrapBase.getForTarget(target)) {\r\n\t\tvalue = trapBase.fire(new QueryEvent(target, {type:'get', query:keys}), defaultGet);\r\n\t} else {\r\n\t\tvalue = defaultGet();\r\n\t}\r\n\t// ---------------------------------\r\n\t// Execute array methods in \"mutation\" mode\r\n\tif (_isArray(target) && !_isNumeric(keys) && _isFunction(value) && !_isClass(value)) {\r\n\t\treturn function reflexArrayMethodWrapper(...args) {\r\n\t\t\treturn transaction([target], () => {\r\n\t\t\t\treturn value.apply(target, args);\r\n\t\t\t});\r\n\t\t};\r\n\t}\r\n\treturn value;\r\n}\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport _isTypeFunction from './isTypeFunction.js';\r\n\r\n/**\r\n * Tells if val is of type \"class\".\r\n *\r\n * @param object \t\tval\r\n *\r\n * @return bool\r\n */\r\nexport default function(val) {\r\n\treturn _isTypeFunction(val) && /^class\\s?/.test(Function.prototype.toString.call(val));\r\n};\r\n","\r\n/**\r\n * Tells if ALL items pass the test.\r\n *\r\n * @param array \tarr\r\n * @param function \tcallback\r\n *\r\n * @return bool\r\n */\r\nexport default function(arr, callback) {\r\n\treturn arr.reduce((prevTest, itm) => prevTest && callback(itm), true);\r\n};\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport _isTypeObject from '@web-native-js/commons/js/isTypeObject.js';\r\nimport QueryEvent from './internal/QueryEvent.js';\r\nimport TrapBase from './internal/TrapBase.js';\r\n\r\n/**\r\n * Runs an \"in\" query operation on a target.\r\n * Fires any such query observers that may be bound to target.\r\n *\r\n * @param array|object\ttarget\r\n * @param string\t\tkey\r\n *\r\n * @return bool\r\n */\r\nexport default function(target, key) {\r\n\tif (!target || !_isTypeObject(target)) {\r\n\t\tthrow new Error('Target must be of type object!');\r\n\t}\r\n\t// ---------------------------------\r\n\t// Execute any \"has\" traps, otherwise \"test\" the default way\r\n\tvar trapBase, defaultHas = function(_state) {\r\n\t\treturn arguments.length ? _state : (key in target);\r\n\t};\r\n\tif (trapBase = TrapBase.getForTarget(target)) {\r\n\t\treturn trapBase.fire(new QueryEvent(target, {type:'has', query:key}), defaultHas);\r\n\t}\r\n\treturn defaultHas();\r\n}\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport _arrFrom from '@web-native-js/commons/arr/from.js';\r\nimport _all from '@web-native-js/commons/arr/all.js';\r\nimport _isString from '@web-native-js/commons/js/isString.js';\r\nimport _isArray from '@web-native-js/commons/js/isArray.js';\r\nimport _isNumber from '@web-native-js/commons/js/isNumber.js';\r\nimport _isObject from '@web-native-js/commons/js/isObject.js';\r\nimport _isTypeObject from '@web-native-js/commons/js/isTypeObject.js';\r\nimport MutationEvent from './internal/MutationEvent.js';\r\nimport QueryEvent from './internal/QueryEvent.js';\r\nimport ObserverBase from './internal/ObserverBase.js';\r\nimport TrapBase from './internal/TrapBase.js';\r\nimport unlink from './unlink.js';\r\nimport link from './link.js';\r\nimport reflexHas from './has.js';\r\n\r\n/**\r\n * Executes a \"_setProp\" type of operation on a target.\r\n * Fires any observers for the specific type that may be bound to target.\r\n *\r\n * @param bool\t\t\tdefine\r\n * @param array|object\ttarget\r\n * @param string|array\tkeysOrPayload\r\n * @param mixed\t\t\tvalue\r\n * @param bool\t\t\treturnEvent\r\n *\r\n * @return bool|Event\r\n */\r\nexport default function(define, target, keysOrPayload, value = null, returnEvent = false) {\r\n\tif (!target || !_isTypeObject(target)) {\r\n\t\tthrow new Error('Target must be of type object!');\r\n\t}\r\n\tif (_isObject(keysOrPayload)) {\r\n\t\treturnEvent = value;\r\n\t}\r\n\tvar keys = keysOrPayload, _data = {}, data = {}, created = [];\r\n\tvar handleSet = (key, value, related) => {\r\n\t\t_data[key] = target[key];\r\n\t\tif (!reflexHas(target, key)) {\r\n\t\t\tcreated.push(key);\r\n\t\t}\r\n\t\t// ---------------------------------\r\n\t\tvar descriptor;\r\n\t\tif (define) {\r\n\t\t\tdescriptor = value || {};\r\n\t\t\tvalue = descriptor.value;\r\n\t\t}\r\n\t\t// Execute any \"set\" traps, otherwise \"set\" the default way\r\n\t\tvar success, trapBase, defaultSet = function(_success) {\r\n\t\t\tif (!arguments.length) {\r\n\t\t\t\tif (descriptor) {\r\n\t\t\t\t\tObject.defineProperty(target, key, descriptor);\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttarget[key] = value;\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn _success;\r\n\t\t};\r\n\t\tif (trapBase = TrapBase.getForTarget(target)) {\r\n\t\t\tvar details = descriptor \r\n\t\t\t\t? {type:'def', query:key, descriptor, related} \r\n\t\t\t\t: {type:'set', query:key, value, related};\r\n\t\t\tsuccess = trapBase.fire(new QueryEvent(target, details), defaultSet);\r\n\t\t} else {\r\n\t\t\tsuccess = defaultSet();\r\n\t\t}\r\n\t\t// ---------------------------------\r\n\t\tif (success) {\r\n\t\t\tdata[key] = value;\r\n\t\t\tif (data[key] !== _data[key]) {\r\n\t\t\t\t// Unobserve outgoing value for bubbling\r\n\t\t\t\tif (_data[key] && _isTypeObject(_data[key])) {\r\n\t\t\t\t\tunlink(target, key, _data[key]);\r\n\t\t\t\t}\r\n\t\t\t\t// Observe incoming value for bubbling\r\n\t\t\t\tif (data[key] && _isTypeObject(data[key])) {\r\n\t\t\t\t\tlink(target, key, data[key]);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tdelete data[key];\r\n\t\t\t\tdelete _data[key];\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tdelete _data[key];\r\n\t\t}\r\n\t\treturn success;\r\n\t};\r\n\t// ---------------------------------\r\n\tvar successStates = [];\r\n\tif (_isArray(keys) || ((_isString(keys) || _isNumber(keys)) && (keys = _arrFrom(keys)))) {\r\n\t\tsuccessStates = keys.map(key => handleSet(key, value, keys))\r\n\t} else if (_isObject(keysOrPayload)) {\r\n\t\tvar payloadKeys = Object.keys(keysOrPayload);\r\n\t\tsuccessStates = payloadKeys.map(key => handleSet(key, keysOrPayload[key], payloadKeys))\r\n\t}\r\n\t// ---------------------------------\r\n\tvar evt, mutationBase;\r\n\tif ((mutationBase = ObserverBase.getForTarget(target)) || returnEvent) {\r\n\t\tevt = new MutationEvent(target, {type:'set', data, _data, created});\r\n\t\tif (mutationBase) {\r\n\t\t\tmutationBase.fire(evt);\r\n\t\t}\r\n\t}\r\n\treturn returnEvent ? evt : _all(successStates, state => state);\r\n}\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport _setProp from './_setProp.js';\r\n\r\n/**\r\n * Executes a \"set\" operation on a target.\r\n * Fires any observers that may be bound to target.\r\n *\r\n * @param array|object\ttarget\r\n * @param string|array\tkeysOrPayload\r\n * @param mixed\t\t\tvalue\r\n * @param bool\t\t\treturnEvent\r\n *\r\n * @return bool|Event\r\n */\r\nexport default function(target, keysOrPayload, value = null, returnEvent = false) {\r\n\treturn _setProp(false/*define*/, ...arguments);\r\n}\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport _arrFrom from '@web-native-js/commons/arr/from.js';\r\nimport reflexGet from './get.js';\r\nimport reflexSet from './set.js';\r\n\r\n/**\r\n * Initializes \"Reflxive getter/setter\" traps on the target.\r\n *\r\n * @param array|object\ttarget\r\n * @param string|array\tkeys\r\n *\r\n * @return void\r\n */\r\nexport default function(target, keys) {\r\n\t_arrFrom(keys).forEach(key => {\r\n\t\tvar value = target[key], onGetFire, onSetFire;\r\n\t\tvar currentDescriptor = Object.getOwnPropertyDescriptor(target, key)\r\n\t\t|| {enumerable: key in target ? false/*existing but hidden*/ : true};\r\n\t\tif ('value' in currentDescriptor) {\r\n\t\t\tdelete currentDescriptor.value;\r\n\t\t}\r\n\t\tif ('writable' in currentDescriptor) {\r\n\t\t\tdelete currentDescriptor.writable;\r\n\t\t}\r\n\t\tcurrentDescriptor.get = () => {\r\n\t\t\tif (onGetFire) {\r\n\t\t\t\treturn value;\r\n\t\t\t}\r\n\t\t\tonGetFire = true;\r\n\t\t\tvar _value = reflexGet(target, key);\r\n\t\t\tonGetFire = false;\r\n\t\t\treturn _value;\r\n\t\t};\r\n\t\tcurrentDescriptor.set = newValue => {\r\n\t\t\tif (onSetFire) {\r\n\t\t\t\tvalue = newValue;\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tonSetFire = true;\r\n\t\t\tvar rspns = reflexSet(target, key, newValue);\r\n\t\t\tonSetFire = false;\r\n\t\t\treturn true;\r\n\t\t};\r\n\t\tObject.defineProperty(target, key, currentDescriptor);\r\n\t});\r\n}\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport _isTypeObject from '@web-native-js/commons/js/isTypeObject.js';\r\nimport QueryEvent from './internal/QueryEvent.js';\r\nimport TrapBase from './internal/TrapBase.js';\r\n\r\n/**\r\n * Runs a \"getProps\" type of query operation on a target.\r\n * Fires any observers for the specific type that may be bound to target.\r\n *\r\n * @param bool\t\t\townKeys\r\n * @param array|object\ttarget\r\n *\r\n * @return array\r\n */\r\nexport default function(ownKeys, target) {\r\n\tif (!target || !_isTypeObject(target)) {\r\n\t\tthrow new Error('Target must be of type object!');\r\n\t}\r\n\t// ---------------------------------\r\n\t// Execute any \"keys\" traps, otherwise \"test\" the default way\r\n\tvar trapBase, defaultKeys = function(_keys) {\r\n\t\treturn arguments.length ? _keys : (\r\n\t\t\townKeys ? Object.getOwnPropertyNames(target) : Object.keys(target)\r\n\t\t);\r\n\t};\r\n\tif (trapBase = TrapBase.getForTarget(target)) {\r\n\t\treturn trapBase.fire(new QueryEvent(target, {type:ownKeys ? 'ownKeys' : 'keys'}), defaultKeys);\r\n\t}\r\n\treturn defaultKeys();\r\n}\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport _getProps from './_getProps.js';\r\n\r\n/**\r\n * Runs a \"keys\" query operation on a target.\r\n * Fires any such query observers that may be bound to target.\r\n *\r\n * @param array|object\ttarget\r\n *\r\n * @return array\r\n */\r\nexport default function(target) {\r\n\treturn _getProps(false/*ownKeys*/, ...arguments);\r\n}\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport _isFunction from '@web-native-js/commons/js/isFunction.js';\r\nimport _isTypeObject from '@web-native-js/commons/js/isTypeObject.js';\r\nimport _getType from '@web-native-js/commons/js/getType.js';\r\nimport TrapBase from './internal/TrapBase.js';\r\nimport Trap from './internal/Trap.js';\r\n\r\n/**\r\n * Adds a trap to an object's firebase.\r\n *\r\n * @param array|object\t\t\t\tobject\r\n * @param function\t\t\t\t\tcallback\r\n * @param object\t\t\t\t\tparams\r\n *\r\n * @return Trap\r\n */\r\nexport default function(object, callback, params = {}) {\r\n\tif (!object || !_isTypeObject(object)) {\r\n\t\tthrow new Error('Object must be of type object!');\r\n\t}\r\n\tif (!_isFunction(callback)) {\r\n\t\tthrow new Error('Callback must be a function; \"' + _getType(callback) + '\" given!');\r\n\t}\r\n\tvar firebase;\r\n\tif (!(firebase = TrapBase.getForTarget(object))) {\r\n\t\tfirebase = TrapBase.createForTarget(object);\r\n\t}\r\n\treturn firebase.addFireable(new Trap(callback, params));\r\n}\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport _setProp from './_setProp.js';\r\n\r\n/**\r\n * Executes a \"set\" operation on a target.\r\n * Fires any observers that may be bound to target.\r\n *\r\n * @param array|object\ttarget\r\n * @param string|array\tkeysOrPayload\r\n * @param mixed\t\t\tvalue\r\n * @param bool\t\t\treturnEvent\r\n *\r\n * @return bool|Event\r\n */\r\nexport default function(target, keysOrPayload, value = null, returnEvent = false) {\r\n\treturn _setProp(true/*define*/, ...arguments);\r\n}\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport _arrFrom from '@web-native-js/commons/arr/from.js';\r\nimport _all from '@web-native-js/commons/arr/all.js';\r\nimport _isTypeObject from '@web-native-js/commons/js/isTypeObject.js';\r\nimport MutationEvent from './internal/MutationEvent.js';\r\nimport QueryEvent from './internal/QueryEvent.js';\r\nimport ObserverBase from './internal/ObserverBase.js';\r\nimport TrapBase from './internal/TrapBase.js';\r\nimport unlink from './unlink.js';\r\nimport reflexHas from './has.js';\r\n\r\n/**\r\n * Executes a \"delete\" operation on a target.\r\n * Fires any observers that may be bound to target.\r\n *\r\n * @param array|object\ttarget\r\n * @param string|array\tkeys\r\n * @param bool\t\t\treturnEvent\r\n *\r\n * @return bool|Event\r\n */\r\nexport default function(target, keys, returnEvent = false) {\r\n\tif (!target || !_isTypeObject(target)) {\r\n\t\tthrow new Error('Target must be of type object!');\r\n\t}\r\n\tvar keys = _arrFrom(keys), _data = {}, data = {}, deleted = [];\r\n\tvar successStates = keys.map(key => {\r\n\t\t_data[key] = target[key];\r\n\t\tif (reflexHas(target, key)) {\r\n\t\t\tdeleted.push(key);\r\n\t\t}\r\n\t\t// ---------------------------------\r\n\t\t// Execute any \"del\" traps, otherwise \"del\" the default way\r\n\t\tvar success, trapBase, defaultDel = function(_success) {\r\n\t\t\tif (!arguments.length) {\r\n\t\t\t\tdelete target[key];\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn _success;\r\n\t\t};\r\n\t\tif (trapBase = TrapBase.getForTarget(target)) {\r\n\t\t\tsuccess = trapBase.fire(new QueryEvent(target, {type:'del', query:key, related:keys}), defaultDel);\r\n\t\t} else {\r\n\t\t\tsuccess = defaultDel();\r\n\t\t}\r\n\t\t// ---------------------------------\r\n\t\tif (success) {\r\n\t\t\tdata[key] = undefined;\r\n\t\t\t// Unobserve outgoing value for bubbling\r\n\t\t\tif (_data[key] && _isTypeObject(_data[key])) {\r\n\t\t\t\tunlink(target, key, _data[key]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn success;\r\n\t});\r\n\t// ---------------------------------\r\n\tvar evt, mutationBase;\r\n\tif ((mutationBase = ObserverBase.getForTarget(target)) || returnEvent) {\r\n\t\tevt = new MutationEvent(target, {type:'del', data, _data, deleted});\r\n\t\tif (mutationBase && Object.keys(data).length) {\r\n\t\t\tmutationBase.fire(evt);\r\n\t\t}\r\n\t}\r\n\treturn returnEvent ? evt : _all(successStates, state => state);\r\n}\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport Firebase from './Firebase.js';\r\n\r\n/**\r\n * ---------------------------\r\n * The ListenerBase class\r\n * ---------------------------\r\n */\t\t\t\t\r\nexport default class ListenerBase extends Firebase {\r\n\t\r\n\t/**\r\n\t * Fires all observers with the given evt (change).\r\n\t *\r\n\t * @param Event\t\t\t\tevt\r\n\t *\r\n\t * @return Event\r\n\t */\r\n\tfire(evt) {\r\n\t\tthis.fireables.forEach(listener => {\r\n\t\t\tif (evt.propagationStopped) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tlistener.fire(evt);\r\n\t\t});\r\n\t\treturn evt;\r\n\t}\r\n\t\r\n\t/**\r\n\t * @inheritdoc\r\n\t */\r\n\tstatic createForTarget(object, Static = ListenerBase) {\r\n\t\treturn super.createForTarget(object, 'listeners', Static);\r\n\t}\r\n\t\r\n\t/**\r\n\t * @inheritdoc\r\n\t */\r\n\tstatic getForTarget(object) {\r\n\t\treturn super.getForTarget(object, 'listeners');\r\n\t}\r\n};","\r\n/**\r\n * @imports\r\n */\r\nimport Fireable from './Fireable.js';\r\n\r\n/**\r\n * ---------------------------\r\n * The Listener class\r\n * ---------------------------\r\n */\t\t\t\t\r\nexport default class extends Fireable {\r\n\t\r\n\t/**\r\n\t * Initializes the instance.\r\n\t *\r\n\t * @param function\t\thandler\r\n\t * @param object\t\tparams\r\n\t *\r\n\t * @return void\r\n\t */\r\n\tconstructor(handler, params = {}) {\r\n\t\tsuper();\r\n\t\tthis.handler = handler;\r\n\t\tthis.params = params;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Calls the observer's handler function\r\n\t * on matching with the event's fields.\r\n\t *\r\n\t * @param MutationEvent\t\t\t \tevt\r\n\t *\r\n\t * @return void\r\n\t */\r\n\tfire(evt) {\r\n\t\tif (this.params.type === evt.type) {\r\n\t\t\tevt.response(this.handler.call(this.target, evt.e));\r\n\t\t}\r\n\t}\r\n};","\r\n/**\r\n * @imports\r\n */\r\nimport build from './build.js';\r\nimport observe from './observe.js';\r\nimport unobserve from './unobserve.js';\r\nimport trap from './trap.js';\r\nimport untrap from './untrap.js';\r\nimport def from './def.js';\r\nimport set from './set.js';\r\nimport del from './del.js';\r\nimport link from './link.js';\r\nimport unlink from './unlink.js';\r\nimport transaction from './transaction.js';\r\nimport get from './get.js';\r\nimport has from './has.js';\r\nimport init from './init.js';\r\nimport keys from './keys.js';\r\nimport ownKeys from './ownKeys.js';\r\nimport on from './on.js';\r\nimport off from './off.js';\r\nimport trigger from './trigger.js';\r\nimport MutationEvent from './internal/MutationEvent.js';\r\nimport QueryEvent from './internal/QueryEvent.js';\r\nimport Event from './internal/Event.js';\r\n\r\n// Now we'll mimick standard Trap properties\r\n// so that can be used as standard Trap out of the box.\r\nconst deleteProperty = del;\r\nconst defineProperty = def;\r\n\r\n/**\r\n * @exports\r\n */\r\nexport default {\r\n\tbuild,\r\n\tobserve,\r\n\tunobserve,\r\n\ttrap,\r\n\tuntrap,\r\n\tdef,\r\n\tdefineProperty,\r\n\tset,\r\n\tdel,\r\n\tdeleteProperty,\r\n\tlink,\r\n\tunlink,\r\n\ttransaction,\r\n\tget,\r\n\thas,\r\n\tinit,\r\n\tkeys,\r\n\townKeys,\r\n\ton,\r\n\toff,\r\n\ttrigger,\r\n\t// Events\r\n\tMutationEvent,\r\n\tQueryEvent,\r\n\tEvent,\r\n};","\r\n/**\r\n * @imports\r\n */\r\nimport _isTypeObject from '@web-native-js/commons/js/isTypeObject.js';\r\nimport init from './init.js';\r\nimport reflexKeys from './keys.js';\r\nimport reflexGet from './get.js';\r\nimport link from './link.js';\r\n\r\n/**\r\n * Recursively \"connects\" an object's members to the object\r\n * for reflex actions.\r\n *\r\n * @param array|object\ttarget\r\n * @param bool\t\t\t_init\r\n *\r\n * @return void\r\n */\r\nexport default function build(target, _init = false) {\r\n\tif (!target || !_isTypeObject(target)) {\r\n\t\tthrow new Error('Target must be of type object!');\r\n\t}\r\n\t// ---------------------------------\r\n\tvar keys = reflexKeys(target);\r\n\tkeys.forEach(key => {\r\n\t\tvar value = reflexGet(target, key);\r\n\t\tif (_isTypeObject(value) && value) {\r\n\t\t\tlink(target, key, value);\r\n\t\t\tbuild(value, _init);\r\n\t\t}\r\n\t});\r\n\tif (_init) {\r\n\t\tinit(target, keys);\r\n\t}\r\n}\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport _isTypeObject from '@web-native-js/commons/js/isTypeObject.js';\r\nimport ObserverBase from './internal/ObserverBase.js';\r\n\r\n/**\r\n * Removes a trap from an object's firebase.\r\n *\r\n * @param array|object\t\t\t\tobject\r\n * @param function\t\t\t\t\toriginalCallback\r\n * @param object\t\t\t\t\tparams\r\n *\r\n * @return void\r\n */\r\nexport default function(object, originalCallback = null, params = {}) {\r\n\tif (!object || !_isTypeObject(object)) {\r\n\t\tthrow new Error('Object must be of type object!');\r\n\t}\r\n\tvar firebase;\r\n\tif (firebase = ObserverBase.getForTarget(object)) {\r\n\t\tfirebase.findFireables({handler:originalCallback, params}).forEach(trap => {\r\n\t\t\tfirebase.removeFireable(trap);\r\n\t\t});\r\n\t}\r\n}\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport _getProps from './_getProps.js';\r\n\r\n/**\r\n * Runs a \"ownKeys\" query operation on a target.\r\n * Fires any such query observers that may be bound to target.\r\n *\r\n * @param array|object\ttarget\r\n *\r\n * @return array\r\n */\r\nexport default function(target) {\r\n\treturn _getProps(true/*ownKeys*/, ...arguments);\r\n}\r\n","\r\n/**\r\n * @imports\r\n */\r\nimport _merge from '@web-native-js/commons/obj/merge.js';\r\nimport ListenerBase from './internal/ListenerBase.js';\r\nimport Listener from './internal/Listener.js';\r\n\r\n/**\r\n * Binds listeners to an element's event controller.\r\n *\r\n * @param array|object \t\t\t\tobject\r\n * @param string\t\t \t\t\ttype\r\n * @param function\t\t \t\t\tcallback\r\n * @param object\t\t\t\t\tparams\r\n *\r\n * @return object\r\n */\r\nexport default function(object, type, callback, params = {}) {\r\n\tvar firebase;\r\n\tif (!(firebase = ListenerBase.getForTarget(object))) {\r\n\t\tfirebase = ListenerBase.createForTarget(object);\r\n\t}\r\n\treturn firebase.addFireable(new Listener(callback, _merge(params, {type})));\r\n};","\r\n/**\r\n * @imports\r\n */\r\nimport ListenerBase from './internal/ListenerBase.js';\r\n\r\n/**\r\n * Unbinds listeners from an element's event controller.\r\n *\r\n * @param array|object \t\t\t\tobject\r\n * @param string\t\t \t\t\ttype\r\n * @param function\t\t \t\t\toriginalCallback\r\n * @param object\t\t\t\t\tparams\r\n *\r\n * @return void\r\n */\r\nexport default function(object, type, originalCallback = null, params = {}) {\r\n\tvar firebase;\r\n\tif (firebase = ListenerBase.getForTarget(object)) {\r\n\t\tfirebase.findFireables({handler:originalCallback, type, params}).forEach(listener => {\r\n\t\t\tfirebase.removeFireable(listener);\r\n\t\t});\r\n\t}\r\n};","\r\n/**\r\n * @imports\r\n */\r\nimport _merge from '@web-native-js/commons/obj/merge.js';\r\nimport ListenerBase from './internal/ListenerBase.js';\r\nimport Event from './internal/Event.js';\r\n\r\n/**\r\n * Fires an event on an object's listenerBase.\r\n *\r\n * @param array|object \t\t\tobject\r\n * @param string                type\r\n * @param object                data\r\n *\r\n * @return Event\r\n */\r\nexport default function(object, type, data = {}) {\r\n\tvar firebase;\r\n\tif (firebase = ListenerBase.getForTarget(object)) {\r\n\t\treturn firebase.fire(new Event(object, _merge(data, {type})));\r\n\t}\r\n};","\r\n/**\r\n * @imports\r\n */\r\nimport Reflex from './index.js';\r\n\r\n// As globals\r\nif (!window.WebNative) {\r\n\twindow.WebNative = {};\r\n}\r\nwindow.WebNative.Reflex = Reflex;\r\n"],"sourceRoot":""}